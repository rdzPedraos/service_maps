System.register(["./leaflet-legacy.fabde539.js"],(function(e,t){"use strict";var r,o,n=document.createElement("style");return n.textContent='.leaflet-control-geosearch *,.leaflet-control-geosearch *:before,.leaflet-control-geosearch *:after{box-sizing:border-box}.leaflet-control-geosearch .leaflet-bar-part{border-radius:4px;border-bottom:none}.leaflet-control-geosearch a.leaflet-bar-part:before,.leaflet-control-geosearch a.leaflet-bar-part:after{position:absolute;display:block;content:""}.leaflet-control-geosearch a.leaflet-bar-part:before{top:17px;left:15px;width:6px;border-top:2px solid #555;transform:rotate(45deg)}.leaflet-control-geosearch a.leaflet-bar-part:after{top:10px;left:10px;height:8px;width:8px;border-radius:50%;border:2px solid #555}.leaflet-control-geosearch.error a.leaflet-bar-part:before,.leaflet-control-geosearch.pending a.leaflet-bar-part:before{display:none}.leaflet-control-geosearch.pending a.leaflet-bar-part:after,.leaflet-control-geosearch.error a.leaflet-bar-part:after{left:50%;top:50%;width:18px;height:18px;margin:-9px 0 0 -9px;border-radius:50%}.leaflet-control-geosearch.pending a.leaflet-bar-part:after{content:"";border:2px solid #555;border-top:2px solid #f3f3f3;animation:spin 1s linear infinite}.leaflet-control-geosearch.error a.leaflet-bar-part:after{content:"!";line-height:initial;font-weight:600;font-size:18px;border:none}.leaflet-control-geosearch form{display:none;position:absolute;top:0;left:30px;border-radius:0 4px 4px 0;background-color:#fff;background-clip:padding-box;z-index:-1;height:auto;margin:0;padding:0 8px;box-shadow:0 1px 5px rgba(0,0,0,.65)}.leaflet-geosearch-button form.open{border-radius:0 4px 4px}.leaflet-control-geosearch.active form{display:block}.leaflet-geosearch-button.active .leaflet-bar-part{border-radius:4px 0 0 4px;width:30px}.leaflet-geosearch-button form{max-width:350px}.leaflet-control-geosearch form input{min-width:200px;width:100%;outline:none;margin:0;padding:0;font-size:12px;height:30px;border:none;border-radius:0 4px 4px 0;text-indent:8px}.leaflet-touch .leaflet-geosearch-bar form{border:2px solid rgba(0,0,0,.2);box-shadow:none}.leaflet-touch .leaflet-geosearch-bar form input{height:30px}.leaflet-control-geosearch .results{background:#fff}.leaflet-control-geosearch .results>*{line-height:24px;padding:0 8px;border:1px solid transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.leaflet-control-geosearch .results.active{padding:8px 0;border-top:1px solid #c6c6c6}.leaflet-control-geosearch .results>.active,.leaflet-control-geosearch .results>:hover{background-color:#f8f8f8;border-color:#c6c6c6;cursor:pointer}.leaflet-control-geosearch .results.active:after{content:"";display:block;width:0;position:absolute;left:-2px;bottom:-2px;top:30px}.leaflet-touch .leaflet-control-geosearch .results.active:after{border-left:2px solid rgba(0,0,0,.2)}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.leaflet-top .leaflet-geosearch-bar,.leaflet-bottom .leaflet-geosearch-bar{display:none}.leaflet-geosearch-bar{position:relative;display:block;height:auto;width:400px;max-width:calc(100% - 120px);margin:10px auto 0;cursor:auto;z-index:1000}.leaflet-geosearch-bar form{position:relative;top:0;left:0;display:block;border-radius:4px}.leaflet-geosearch-bar form input{min-width:100%;width:100%}.leaflet-geosearch-bar .results.active:after{opacity:.2}.leaflet-right .leaflet-control-geosearch form{right:28px;left:initial;border-radius:4px 0 0 4px;border-left:inherit;border-right:none}.leaflet-bar-notfound{font-style:italic}.leaflet-control-geosearch button.reset{color:#000;font-weight:700;position:absolute;line-height:26px;padding:0 8px;right:0;top:0;cursor:pointer;border:none;text-decoration:none;background-color:#fff;border-radius:0 4px 4px 0}.leaflet-touch .leaflet-control-geosearch button.reset{line-height:30px}.leaflet-control-geosearch button.reset:hover{background:#f5f5f5}\n',document.head.appendChild(n),{setters:[function(e){r=e.t,o=e.l}],execute:function(){function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},t.apply(this,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e,t,r){return i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,r){var o=[null];o.push.apply(o,t);var n=new(Function.bind.apply(e,o));return r&&a(n,r.prototype),n},i.apply(null,arguments)}function s(e,t,r,o){void 0===t&&(t=""),void 0===o&&(o={});var n=document.createElement(e);return t&&(n.className=t),Object.keys(o).forEach((function(e){if("function"==typeof o[e]){var t=0===e.indexOf("on")?e.substr(2).toLowerCase():e;n.addEventListener(t,o[e])}else"html"===e?n.innerHTML=o[e]:"text"===e?n.innerText=o[e]:n.setAttribute(e,o[e])})),r&&r.appendChild(n),n}function l(e){e.preventDefault(),e.stopPropagation()}e("w",(function(){if(!r)throw new Error(x);var e=o.Control.extend(E);return i(e,[].slice.call(arguments))}));var c=function(){return[].slice.call(arguments).filter(Boolean).join(" ").trim()};function u(e,t){e&&e.classList&&(Array.isArray(t)?t:[t]).forEach((function(t){e.classList.contains(t)||e.classList.add(t)}))}function h(e,t){e&&e.classList&&(Array.isArray(t)?t:[t]).forEach((function(t){e.classList.contains(t)&&e.classList.remove(t)}))}var f,p=13,d=40,m=38,b=[p,27,d,m,37,39],v=function(){function e(e){var t=this,r=e.handleSubmit,o=e.searchLabel,n=e.classNames,a=void 0===n?{}:n;this.container=void 0,this.form=void 0,this.input=void 0,this.handleSubmit=void 0,this.hasError=!1,this.container=s("div",c("geosearch",a.container)),this.form=s("form",["",a.form].join(" "),this.container,{autocomplete:"none",onClick:l,onDblClick:l,touchStart:l,touchEnd:l}),this.input=s("input",["glass",a.input].join(" "),this.form,{type:"text",placeholder:o||"search",onInput:this.onInput,onKeyUp:function(e){return t.onKeyUp(e)},onKeyPress:function(e){return t.onKeyPress(e)},onFocus:this.onFocus,onBlur:this.onBlur,onClick:function(){t.input.focus(),t.input.dispatchEvent(new Event("focus"))}}),this.handleSubmit=r}var t=e.prototype;return t.onFocus=function(){u(this.form,"active")},t.onBlur=function(){h(this.form,"active")},t.onSubmit=function(e){try{var t=this;return l(e),h(r=t.container,"error"),u(r,"pending"),Promise.resolve(t.handleSubmit({query:t.input.value})).then((function(){h(t.container,"pending")}))}catch(e){return Promise.reject(e)}var r},t.onInput=function(){this.hasError&&(h(this.container,"error"),this.hasError=!1)},t.onKeyUp=function(e){27===e.keyCode&&(h(this.container,["pending","active"]),this.input.value="",document.body.focus(),document.body.blur())},t.onKeyPress=function(e){e.keyCode===p&&this.onSubmit(e)},t.setQuery=function(e){this.input.value=e},e}(),g=function(){function e(e){var t=this,r=e.handleClick,o=e.classNames,n=void 0===o?{}:o,a=e.notFoundMessage;this.handleClick=void 0,this.selected=-1,this.results=[],this.container=void 0,this.resultItem=void 0,this.notFoundMessage=void 0,this.onClick=function(e){if("function"==typeof t.handleClick){var r=e.target;if(r&&t.container.contains(r)&&r.hasAttribute("data-key")){var o=Number(r.getAttribute("data-key"));t.handleClick({result:t.results[o]})}}},this.handleClick=r,this.notFoundMessage=a?s("div",c(n.notfound),void 0,{html:a}):void 0,this.container=s("div",c("results",n.resultlist)),this.container.addEventListener("click",this.onClick,!0),this.resultItem=s("div",c(n.item))}var t=e.prototype;return t.render=function(e,t){var r=this;void 0===e&&(e=[]),this.clear(),e.forEach((function(e,o){var n=r.resultItem.cloneNode(!0);n.setAttribute("data-key",""+o),n.innerHTML=t({result:e}),r.container.appendChild(n)})),e.length>0?(u(this.container.parentElement,"open"),u(this.container,"active")):this.notFoundMessage&&(this.container.appendChild(this.notFoundMessage),u(this.container.parentElement,"open")),this.results=e},t.select=function(e){return Array.from(this.container.children).forEach((function(t,r){return r===e?u(t,"active"):h(t,"active")})),this.selected=e,this.results[e]},t.count=function(){return this.results?this.results.length:0},t.clear=function(){for(this.selected=-1;this.container.lastChild;)this.container.removeChild(this.container.lastChild);h(this.container.parentElement,"open"),h(this.container,"active")},e}(),y={position:"topleft",style:"button",showMarker:!0,showPopup:!1,popupFormat:function(e){return""+e.result.label},resultFormat:function(e){return""+e.result.label},marker:{icon:r&&o.Icon?new o.Icon.Default:void 0,draggable:!1},maxMarkers:1,maxSuggestions:5,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",clearSearchLabel:"Clear search",notFoundMessage:"",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",resetButton:"reset",msgbox:"leaflet-bar message",form:"",input:"",resultlist:"",item:"",notfound:"leaflet-bar-notfound"},autoComplete:!0,autoCompleteDelay:250,autoClose:!1,keepResult:!1,updateMap:!0},x="Leaflet must be loaded before instantiating the GeoSearch control",E={options:t({},y),classNames:t({},y.classNames),initialize:function(e){var n,a,i,l,c=this;if(!r)throw new Error(x);if(!e.provider)throw new Error("Provider is missing from options");this.options=t({},y,e),this.classNames=t({},this.classNames,e.classNames),this.markers=new o.FeatureGroup,this.classNames.container+=" leaflet-geosearch-"+this.options.style,this.searchElement=new v({searchLabel:this.options.searchLabel,classNames:{container:this.classNames.container,form:this.classNames.form,input:this.classNames.input},handleSubmit:function(e){return c.onSubmit(e)}}),this.button=s("a",this.classNames.button,this.searchElement.container,{title:this.options.searchLabel,href:"#",onClick:function(e){return c.onClick(e)}}),o.DomEvent.disableClickPropagation(this.button),this.resetButton=s("button",this.classNames.resetButton,this.searchElement.form,{text:"×","aria-label":this.options.clearSearchLabel,onClick:function(){""===c.searchElement.input.value?c.close():c.clearResults(null,!0)}}),o.DomEvent.disableClickPropagation(this.resetButton),this.options.autoComplete&&(this.resultList=new g({handleClick:function(e){var t=e.result;c.searchElement.input.value=t.label,c.onSubmit({query:t.label,data:t})},classNames:{resultlist:this.classNames.resultlist,item:this.classNames.item,notfound:this.classNames.notfound},notFoundMessage:this.options.notFoundMessage}),this.searchElement.form.appendChild(this.resultList.container),this.searchElement.input.addEventListener("keyup",(n=function(e){return c.autoSearch(e)},void 0===(a=this.options.autoCompleteDelay)&&(a=250),void 0===i&&(i=!1),function(){var e=[].slice.call(arguments);l&&clearTimeout(l),l=setTimeout((function(){l=null,i||n.apply(void 0,e)}),a),i&&!l&&n.apply(void 0,e)}),!0),this.searchElement.input.addEventListener("keydown",(function(e){return c.selectResult(e)}),!0),this.searchElement.input.addEventListener("keydown",(function(e){return c.clearResults(e,!0)}),!0)),this.searchElement.form.addEventListener("click",(function(e){e.preventDefault()}),!1)},onAdd:function(e){var t=this.options,r=t.showMarker,n=t.style;if(this.map=e,r&&this.markers.addTo(e),"bar"===n){var a=e.getContainer().querySelector(".leaflet-control-container");this.container=s("div","leaflet-control-geosearch leaflet-geosearch-bar"),this.container.appendChild(this.searchElement.form),a.appendChild(this.container)}return o.DomEvent.disableClickPropagation(this.searchElement.form),this.searchElement.container},onRemove:function(){var e;return null==(e=this.container)||e.remove(),this},open:function(){var e=this.searchElement,t=e.input;u(e.container,"active"),t.focus()},close:function(){h(this.searchElement.container,"active"),this.clearResults()},onClick:function(e){e.preventDefault(),e.stopPropagation(),this.searchElement.container.classList.contains("active")?this.close():this.open()},selectResult:function(e){if(-1!==[p,d,m].indexOf(e.keyCode))if(e.preventDefault(),e.keyCode!==p){var t=this.resultList.count()-1;if(!(t<0)){var r=this.resultList.selected,o=e.keyCode===d?r+1:r-1,n=this.resultList.select(o<0?t:o>t?0:o);this.searchElement.input.value=n.label}}else{var a=this.resultList.select(this.resultList.selected);this.onSubmit({query:this.searchElement.input.value,data:a})}},clearResults:function(e,t){if(void 0===t&&(t=!1),!e||27===e.keyCode){var r=this.options,o=r.autoComplete;!t&&r.keepResult||(this.searchElement.input.value="",this.markers.clearLayers()),o&&this.resultList.clear()}},autoSearch:function(e){try{var t=this;if(b.indexOf(e.keyCode)>-1)return Promise.resolve();var r=e.target.value,o=t.options.provider,n=function(){if(r.length)return Promise.resolve(o.search({query:r})).then((function(e){e=e.slice(0,t.options.maxSuggestions),t.resultList.render(e,t.options.resultFormat)}));t.resultList.clear()}();return Promise.resolve(n&&n.then?n.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},onSubmit:function(e){try{var t=this;return t.resultList.clear(),Promise.resolve(t.options.provider.search(e)).then((function(r){r&&r.length>0&&t.showResult(r[0],e)}))}catch(e){return Promise.reject(e)}},showResult:function(e,t){var r=this.options,o=r.autoClose,n=r.updateMap,a=this.markers.getLayers();a.length>=this.options.maxMarkers&&this.markers.removeLayer(a[0]);var i=this.addMarker(e,t);n&&this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:i}),o&&this.closeResults()},closeResults:function(){var e=this.searchElement.container;e.classList.contains("active")&&h(e,"active"),this.clearResults()},addMarker:function(e,t){var r=this,n=this.options,a=n.marker,i=n.showPopup,s=n.popupFormat,l=new o.Marker([e.y,e.x],a),c=e.label;return"function"==typeof s&&(c=s({query:t,result:e})),l.bindPopup(c),this.markers.addLayer(l),i&&l.openPopup(),a.draggable&&l.on("dragend",(function(e){r.map.fireEvent("geosearch/marker/dragend",{location:l.getLatLng(),event:e})})),l},centerMap:function(e){var t=this.options,r=t.retainZoomLevel,n=t.animateZoom,a=e.bounds?new o.LatLngBounds(e.bounds):new o.LatLng(e.y,e.x).toBounds(10),i=a.isValid()?a:this.markers.getBounds();!r&&a.isValid()&&!e.bounds||r||!a.isValid()?this.map.setView(i.getCenter(),this.getZoom(),{animate:n}):this.map.fitBounds(i,{animate:n})},getZoom:function(){var e=this.options,t=e.zoomLevel;return e.retainZoomLevel?this.map.getZoom():t}};!function(e){e[e.SEARCH=0]="SEARCH",e[e.REVERSE=1]="REVERSE"}(f||(f={}));var k,C=function(){function e(e){void 0===e&&(e={}),this.options=void 0,this.options=e}var r=e.prototype;return r.getParamString=function(e){void 0===e&&(e={});var r=t({},this.options.params,e);return Object.keys(r).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&")},r.getUrl=function(e,t){return e+"?"+this.getParamString(t)},r.search=function(e){try{var t=this,r=t.endpoint({query:e.query,type:f.SEARCH});return Promise.resolve(fetch(r)).then((function(e){return Promise.resolve(e.json()).then((function(e){return t.parse({data:e})}))}))}catch(e){return Promise.reject(e)}},e}();!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(k||(k={})),e("F",function(e){function t(t){var r;void 0===t&&(t={}),(r=e.call(this,t)||this).searchUrl=void 0,r.reverseUrl=void 0;var o="https://nominatim.openstreetmap.org";return r.searchUrl=t.searchUrl||o+"/search",r.reverseUrl=t.reverseUrl||o+"/reverse",r}n(t,e);var r=t.prototype;return r.endpoint=function(e){var t=e.query,r=e.type,o="string"==typeof t?{q:t}:t;return o.format="json",this.getUrl(r===f.REVERSE?this.reverseUrl:this.searchUrl,o)},r.parse=function(e){return(Array.isArray(e.data)?e.data:[e.data]).map((function(e){return{x:Number(e.lon),y:Number(e.lat),label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}}))},t}(C))}}}));
