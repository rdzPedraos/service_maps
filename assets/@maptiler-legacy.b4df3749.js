!function(){function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function t(t){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?e(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var n=t&&t.prototype instanceof b?t:b,i=Object.create(n.prototype),l=new x(o||[]);return a(i,"_invoke",{value:R(e,r,l)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var m="suspendedStart",v="suspendedYield",y="executing",d="completed",g={};function b(){}function L(){}function w(){}var A={};p(A,l,(function(){return this}));var S=Object.getPrototypeOf,_=S&&S(S(P([])));_&&_!==r&&o.call(_,l)&&(A=_);var T=w.prototype=b.prototype=Object.create(A);function I(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(n,a,i,l){var u=h(e[n],e,a);if("throw"!==u.type){var c=u.arg,p=c.value;return p&&"object"==s(p)&&o.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(p).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,l)}))}l(u.arg)}var n;a(this,"_invoke",{value:function(e,o){function a(){return new t((function(t,n){r(e,o,t,n)}))}return n=n?n.then(a,a):a()}})}function R(t,r,o){var n=m;return function(a,i){if(n===y)throw new Error("Generator is already running");if(n===d){if("throw"===a)throw i;return{value:e,done:!0}}for(o.method=a,o.arg=i;;){var l=o.delegate;if(l){var u=k(l,o);if(u){if(u===g)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===m)throw n=d,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=y;var c=h(t,r,o);if("normal"===c.type){if(n=o.done?d:v,c.arg===g)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(n=d,o.method="throw",o.arg=c.arg)}}}function k(t,r){var o=r.method,n=t.iterator[o];if(n===e)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),g;var a=h(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(s(t)+" is not iterable")}return L.prototype=w,a(T,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:L,configurable:!0}),L.displayName=p(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===L||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},I(E.prototype),p(E.prototype,u,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,o,n,a){void 0===a&&(a=Promise);var i=new E(f(e,r,o,n),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(T),p(T,c,"Generator"),p(T,l,(function(){return this})),p(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function e(){for(;r.length;){var o=r.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=P,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(o,n){return l.type="throw",l.arg=t,r.next=o,n&&(r.method="next",r.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;O(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,o){return this.delegate={iterator:P(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=e),g}},t}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},c.apply(this,arguments)}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t,r){return t=d(t),function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(e,v()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r))}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function m(e){var t="function"==typeof Map?new Map:void 0;return m=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(v())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var n=new(e.bind.apply(e,o));return r&&y(n,r.prototype),n}(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,e)},m(e)}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function g(e,t,r,o,n,a,i){try{var l=e[a](i),u=l.value}catch(c){return void r(c)}l.done?t(u):Promise.resolve(u).then(o,n)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function i(e){g(a,o,n,i,l,"next",e)}function l(e){g(a,o,n,i,l,"throw",e)}i(void 0)}))}}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,S(o.key),o)}}function A(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:String(t)}System.register(["./maplibre-gl-legacy.49e08608.js","./js-base64-legacy.81184b13.js","./events-legacy.15a64e3a.js","./uuid-legacy.ffafc7bf.js","./leaflet-legacy.fabde539.js"],(function(e,r){"use strict";var l,u,v,y,g;return{setters:[function(e){l=e.m},function(e){u=e.g},function(e){v=e.e},function(e){y=e.v},function(e){g=e.l}],execute:function(){var r=new(function(){function e(){L(this,e),this._apiKey="",this._fetch="undefined"!=typeof self?fetch.bind(self):"undefined"!=typeof global&&global.fetch?global.fetch:null,this.tileCacheSize=200}return A(e,[{key:"apiKey",get:function(){return this._apiKey},set:function(e){this._apiKey=e}},{key:"fetch",get:function(){return this._fetch},set:function(e){this._fetch=e}}]),e}());function w(e){return S.apply(this,arguments)}function S(){return S=b(n().mark((function e(t){var o,a=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.length>1&&void 0!==a[1]?a[1]:{},null!==r.fetch){e.next=3;break}throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");case 3:if(""!==new URL(t).searchParams.get("key").trim()){e.next=5;break}throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");case 5:return e.abrupt("return",r.fetch(t,o));case 6:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}new Set(Object.values({AUTO:"auto",ALBANIAN:"sq",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HUNGARIAN:"hu",ICELANDIC:"is",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALTESE:"mt",NORWEGIAN:"no",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"}));var _={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(_);var T=function(e){function t(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return L(this,t),(r=p(this,t,["Call to enpoint ".concat(e.url," failed with the status code ").concat(e.status,". ").concat(o)])).res=e,r}return h(t,e),A(t)}(m(Error)),I={403:"Key is missing, invalid or restricted"};function E(){return E=b(n().mark((function e(){var t,o,a,i,l,u,c=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>0&&void 0!==c[0]?c[0]:{},(a=new URL("geolocation/ip.json",_.maptilerApiURL)).searchParams.set("key",null!==(t=o.apiKey)&&void 0!==t?t:r.apiKey),i=a.toString(),e.next=6,w(i);case 6:if((l=e.sent).ok){e.next=9;break}throw new T(l,l.status in I?I[l.status]:"");case 9:return e.next=11,l.json();case 11:return u=e.sent,e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}var R={info:function(){return E.apply(this,arguments)}};function k(e){var t,r=e.trim();return r.startsWith("http://")||r.startsWith("https://")?r:null!==(t=/^maptiler:\/\/(.*)/.exec(r))?"https://api.maptiler.com/maps/".concat(t[1],"/style.json"):"https://api.maptiler.com/maps/".concat(r,"/style.json")}var C=function(){function e(t,r,o,n,a,i){L(this,e),this.name=t,this.variantType=r,this.id=o,this.referenceStyle=n,this.description=a,this.imageURL=i}return A(e,[{key:"getName",value:function(){return this.name}},{key:"getFullName",value:function(){return"".concat(this.referenceStyle.getName()," ").concat(this.name)}},{key:"getType",value:function(){return this.variantType}},{key:"getId",value:function(){return this.id}},{key:"getDescription",value:function(){return this.description}},{key:"getReferenceStyle",value:function(){return this.referenceStyle}},{key:"hasVariant",value:function(e){return this.referenceStyle.hasVariant(e)}},{key:"getVariant",value:function(e){return this.referenceStyle.getVariant(e)}},{key:"getVariants",value:function(){var e=this;return this.referenceStyle.getVariants().filter((function(t){return t!==e}))}},{key:"getImageURL",value:function(){return this.imageURL}},{key:"getExpandedStyleURL",value:function(){return k(this.getId())}}]),e}(),O=function(){function e(t,r){L(this,e),this.name=t,this.id=r,this.variants={},this.orderedVariants=[]}return A(e,[{key:"getName",value:function(){return this.name}},{key:"getId",value:function(){return this.id}},{key:"addVariant",value:function(e){this.variants[e.getType()]=e,this.orderedVariants.push(e)}},{key:"hasVariant",value:function(e){return e in this.variants}},{key:"getVariant",value:function(e){return e in this.variants?this.variants[e]:this.orderedVariants[0]}},{key:"getVariants",value:function(){return Object.values(this.variants)}},{key:"getDefaultVariant",value:function(){return this.orderedVariants[0]}}]),e}(),x=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function P(e){return new Proxy(e,{get:function(t,r,o){return t.hasVariant(r)?t.getVariant(r):r.toString().toUpperCase()===r?e.getDefaultVariant():Reflect.get(t,r,o)}})}var N=function(){for(var e={},t=0;t<x.length;t+=1){for(var r=x[t],o=P(new O(r.name,r.referenceStyleID)),n=0;n<r.variants.length;n+=1){var a=r.variants[n],i=new C(a.name,a.variantType,a.id,o,a.description,a.imageURL);o.addVariant(i)}e[r.referenceStyleID]=o}return e}(),U={VISITOR:"visitor",VISITOR_ENGLISH:"visitor_en",STYLE:"style",AUTO:"auto",STYLE_LOCK:"style_lock",LATIN:"name:latin",NON_LATIN:"name:nonlatin",LOCAL:"name",INTERNATIONAL:"name_int",ALBANIAN:"name:sq",AMHARIC:"name:am",ARABIC:"name:ar",ARMENIAN:"name:hy",AZERBAIJANI:"name:az",BASQUE:"name:eu",BELORUSSIAN:"name:be",BENGALI:"name:bn",BOSNIAN:"name:bs",BRETON:"name:br",BULGARIAN:"name:bg",CATALAN:"name:ca",CHINESE:"name:zh",TRADITIONAL_CHINESE:"name:zh-Hant",SIMPLIFIED_CHINESE:"name:zh-Hans",CORSICAN:"name:co",CROATIAN:"name:hr",CZECH:"name:cs",DANISH:"name:da",DUTCH:"name:nl",ENGLISH:"name:en",ESPERANTO:"name:eo",ESTONIAN:"name:et",FINNISH:"name:fi",FRENCH:"name:fr",FRISIAN:"name:fy",GEORGIAN:"name:ka",GERMAN:"name:de",GREEK:"name:el",HEBREW:"name:he",HINDI:"name:hi",HUNGARIAN:"name:hu",ICELANDIC:"name:is",INDONESIAN:"name:id",IRISH:"name:ga",ITALIAN:"name:it",JAPANESE:"name:ja",JAPANESE_HIRAGANA:"name:ja-Hira",JAPANESE_KANA:"name:ja_kana",JAPANESE_LATIN:"name:ja_rm",JAPANESE_2018:"name:ja-Latn",KANNADA:"name:kn",KAZAKH:"name:kk",KOREAN:"name:ko",KOREAN_LATIN:"name:ko-Latn",KURDISH:"name:ku",ROMAN_LATIN:"name:la",LATVIAN:"name:lv",LITHUANIAN:"name:lt",LUXEMBOURGISH:"name:lb",MACEDONIAN:"name:mk",MALAYALAM:"name:ml",MALTESE:"name:mt",NORWEGIAN:"name:no",OCCITAN:"name:oc",PERSIAN:"name:fa",POLISH:"name:pl",PORTUGUESE:"name:pt",PUNJABI:"name:pa",WESTERN_PUNJABI:"name:pnb",ROMANIAN:"name:ro",ROMANSH:"name:rm",RUSSIAN:"name:ru",SCOTTISH_GAELIC:"name:gd",SERBIAN_CYRILLIC:"name:sr",SERBIAN_LATIN:"name:sr-Latn",SLOVAK:"name:sk",SLOVENE:"name:sl",SPANISH:"name:es",SWEDISH:"name:sv",TAMIL:"name:ta",TELUGU:"name:te",THAI:"name:th",TURKISH:"name:tr",UKRAINIAN:"name:uk",URDU:"name:ur",VIETNAMIAN_LATIN:"name:vi",WELSH:"name:cy"},z=new Set(Object.values(U));function D(e){return z.has(e)}var M=new Set(Object.values(U));function j(){if("undefined"==typeof navigator)return"name:".concat(Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0]);var e=Array.from(new Set(navigator.languages.map((function(e){return"name:".concat(e.split("-")[0])})))).filter((function(e){return M.has(e)}));return e.length?e[0]:U.LOCAL}var F={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:U.STYLE,secondaryLanguage:U.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(F);var B=Object.defineProperty,H=function(e,t,r){return function(e,t,r){t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r}(e,"symbol"!==s(t)?t+"":t,r),r},G=y(),K=new(function(e){function t(){var e;return L(this,t),e=p(this,t),H(f(e),"primaryLanguage",F.primaryLanguage),H(f(e),"secondaryLanguage"),H(f(e),"session",!0),H(f(e),"_unit","metric"),H(f(e),"_apiKey",""),e}return h(t,e),A(t,[{key:"unit",get:function(){return this._unit},set:function(e){this._unit=e,this.emit("unit",e)}},{key:"apiKey",get:function(){return this._apiKey},set:function(e){this._apiKey=e,r.apiKey=e,this.emit("apiKey",e)}},{key:"fetch",get:function(){return r.fetch},set:function(e){r.fetch=e}}]),t}(v.exports)),V=function(e){function t(){return L(this,t),p(this,t,arguments)}return h(t,e),A(t,[{key:"onAdd",value:function(e){return c(d(t.prototype),"onAdd",this).call(this,e)}}]),t}(l.LogoControl),W=Object.defineProperty,Z=function(e,t,r){return function(e,t,r){t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r}(e,"symbol"!==s(t)?t+"":t,r),r},Y=function(e){function t(){var e,r,o,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return L(this,t),e=p(this,t,[n]),Z(f(e),"logoURL",""),Z(f(e),"linkURL",""),e.logoURL=null!=(r=n.logoURL)?r:F.maptilerLogoURL,e.linkURL=null!=(o=n.linkURL)?o:F.maptilerURL,e}return h(t,e),A(t,[{key:"onAdd",value:function(e){var t;this._map=e,this._compact=null!=(t=this.options.compact)&&t,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";var r=window.document.createElement("a");return r.style.backgroundRepeat="no-repeat",r.style.cursor="pointer",r.style.display="block",r.style.height="23px",r.style.margin="0 0 -4px -4px",r.style.overflow="hidden",r.style.width="88px",r.style.backgroundImage="url(".concat(this.logoURL,")"),r.style.backgroundSize="100px 30px",r.style.width="100px",r.style.height="30px",r.target="_blank",r.rel="noopener",r.href=this.linkURL,r.setAttribute("aria-label","MapTiler logo"),r.setAttribute("rel","noopener"),this._container.appendChild(r),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}]),t}(V),q=Object.defineProperty,J=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,Q=function(e,t,r){return t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},ee=function(e,t){for(var r in t||(t={}))X.call(t,r)&&Q(e,r,t[r]);if(J){var o,n=i(J(t));try{for(n.s();!(o=n.n()).done;){r=o.value;$.call(t,r)&&Q(e,r,t[r])}}catch(a){n.e(a)}finally{n.f()}}return e};function te(e,t,r){var o=window.document.createElement(e);return void 0!==t&&(o.className=t),r&&r.appendChild(o),o}function re(e){e.parentNode&&e.parentNode.removeChild(e)}function oe(e,t){var r=null;try{r=new URL(e)}catch(o){return{url:e}}return r.host===F.maptilerApiHost&&(r.searchParams.has("key")||r.searchParams.append("key",K.apiKey),K.session&&r.searchParams.append("mtsid",G)),{url:r.href}}function ne(e){return function(t,r){var o;if(void 0!==e){var n=e(t,r),a=oe(null!=(o=null==n?void 0:n.url)?o:"");return ee(ee({},n),a)}return oe(t)}}function ae(){return Math.random().toString(36).substring(2)}function ie(e){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e)}function le(e){try{return JSON.parse(e)}catch(t){}return null}function ue(e){return e?"string"==typeof e||e instanceof String?!e.startsWith("http")&&e.toLowerCase().includes(".json")?e:k(e):e instanceof C?e.getExpandedStyleURL():e instanceof O?e.getDefaultVariant().getExpandedStyleURL():e:N[x[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL()}var ce,se,pe,fe,he,me,ve,ye,de,ge,be,Le,we,Ae=Object.defineProperty,Se=function(e,t,r){return function(e,t,r){t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r}(e,"symbol"!==s(t)?t+"":t,r),r},_e=function(){function e(){var t;L(this,e),Se(this,"_map"),Se(this,"_container"),Se(this,"_terrainButton"),t=this,["_toggleTerrain","_updateTerrainIcon"].forEach((function(e){"function"==typeof t[e]&&(t[e]=t[e].bind(t))}))}return A(e,[{key:"onAdd",value:function(e){return this._map=e,this._container=te("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=te("button","maplibregl-ctrl-terrain",this._container),te("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}},{key:"onRemove",value:function(){re(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},{key:"_toggleTerrain",value:function(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}},{key:"_updateTerrainIcon",value:function(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}}]),e}(),Te=function(e){function t(){return L(this,t),p(this,t,arguments)}return h(t,e),A(t,[{key:"onAdd",value:function(e){return c(d(t.prototype),"onAdd",this).call(this,e)}}]),t}(l.NavigationControl),Ie=Object.defineProperty,Ee=function(e,t,r){return function(e,t,r){t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r}(e,"symbol"!==s(t)?t+"":t,r),r},Re=function(e){function t(){var e;return L(this,t),e=p(this,t,[{showCompass:!0,showZoom:!0,visualizePitch:!0}]),Ee(f(e),"_rotateCompassArrow",(function(){var t=e.options.visualizePitch?"scale(".concat(Math.min(1.5,1/Math.pow(Math.cos(e._map.transform.pitch*(Math.PI/180)),.5)),") rotateX(").concat(Math.min(70,e._map.transform.pitch),"deg) rotateZ(").concat(e._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(e._map.transform.angle*(180/Math.PI),"deg)");e._compassIcon.style.transform=t})),e._compass.removeEventListener("click",e._compass.clickFunction),e._compass.addEventListener("click",(function(t){0===e._map.getPitch()?e._map.easeTo({pitch:Math.min(e._map.getMaxPitch(),80)}):e.options.visualizePitch?e._map.resetNorthPitch({},{originalEvent:t}):e._map.resetNorth({},{originalEvent:t})})),e}return h(t,e),A(t,[{key:"_createButton",value:function(e,r){var o=c(d(t.prototype),"_createButton",this).call(this,e,r);return o.clickFunction=r,o}}]),t}(Te),ke=function(e){function t(){return L(this,t),p(this,t,arguments)}return h(t,e),A(t,[{key:"onAdd",value:function(e){return c(d(t.prototype),"onAdd",this).call(this,e)}}]),t}(l.GeolocateControl),Ce=Object.defineProperty,Oe=Object.defineProperties,xe=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,ze=function(e,t,r){return t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},De=function(e,t,r){return ze(e,"symbol"!==s(t)?t+"":t,r),r},Me=l.Marker,je=l.LngLat,Fe=l.LngLatBounds,Be=function(e){function t(){var e;return L(this,t),e=p(this,t,arguments),De(f(e),"lastUpdatedCenter",new je(0,0)),De(f(e),"_updateCamera",(function(t){var r,o,n,a,l=new je(t.coords.longitude,t.coords.latitude),u=t.coords.accuracy,c=e._map.getBearing(),s=(a=function(e,t){for(var r in t||(t={}))Ne.call(t,r)&&ze(e,r,t[r]);if(Pe){var o,n=i(Pe(t));try{for(n.s();!(o=n.n()).done;)r=o.value,Ue.call(t,r)&&ze(e,r,t[r])}catch(a){n.e(a)}finally{n.f()}}return e}({bearing:c},e.options.fitBoundsOptions),Oe(a,xe({linear:!0}))),p=e._map.getZoom();p>(null!=(n=null==(o=null==(r=e.options)?void 0:r.fitBoundsOptions)?void 0:o.maxZoom)?n:30)&&(s.zoom=p),e._map.fitBounds(Fe.fromLngLat(l,u),s,{geolocateSource:!0});var f=!1,h=function(){f=!0};e._map.once("click",h),e._map.once("dblclick",h),e._map.once("dragstart",h),e._map.once("mousedown",h),e._map.once("touchstart",h),e._map.once("wheel",h),e._map.once("moveend",(function(){e._map.off("click",h),e._map.off("dblclick",h),e._map.off("dragstart",h),e._map.off("mousedown",h),e._map.off("touchstart",h),e._map.off("wheel",h),f||(e.lastUpdatedCenter=e._map.getCenter())}))})),De(f(e),"_setupUI",(function(t){if(e.lastUpdatedCenter=e._map.getCenter(),e._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),e._geolocateButton=te("button","maplibregl-ctrl-geolocate",e._container),te("span","maplibregl-ctrl-icon",e._geolocateButton).setAttribute("aria-hidden","true"),e._geolocateButton.type="button",!1===t){var r=e._map._getUIString("GeolocateControl.LocationNotAvailable");e._geolocateButton.disabled=!0,e._geolocateButton.title=r,e._geolocateButton.setAttribute("aria-label",r)}else{var o=e._map._getUIString("GeolocateControl.FindMyLocation");e._geolocateButton.title=o,e._geolocateButton.setAttribute("aria-label",o)}e.options.trackUserLocation&&(e._geolocateButton.setAttribute("aria-pressed","false"),e._watchState="OFF"),e.options.showUserLocation&&(e._dotElement=te("div","maplibregl-user-location-dot"),e._userLocationDotMarker=new Me({element:e._dotElement}),e._circleElement=te("div","maplibregl-user-location-accuracy-circle"),e._accuracyCircleMarker=new Me({element:e._circleElement,pitchAlignment:"map"}),e.options.trackUserLocation&&(e._watchState="OFF"),e._map.on("move",e._onZoom)),e._geolocateButton.addEventListener("click",e.trigger.bind(f(e))),e._setup=!0,e.options.trackUserLocation&&e._map.on("moveend",(function(t){var r=t.originalEvent&&"resize"===t.originalEvent.type,o=e.lastUpdatedCenter.distanceTo(e._map.getCenter());!t.geolocateSource&&"ACTIVE_LOCK"===e._watchState&&!r&&o>1&&(e._watchState="BACKGROUND",e._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),e.fire(new Event("trackuserlocationend")))}))})),De(f(e),"_onZoom",(function(){e.options.showUserLocation&&e.options.showAccuracyCircle&&e._updateCircleRadius()})),e}return h(t,e),A(t,[{key:"_updateCircleRadius",value:function(){if("BACKGROUND"===this._watchState||"ACTIVE_LOCK"===this._watchState){var e=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],t=this._map.project(e),r=this._map.unproject([t.x,t.y]),o=this._map.unproject([t.x+20,t.y]),n=r.distanceTo(o)/20,a=Math.ceil(2*this._accuracy/n);this._circleElement.style.width="".concat(a,"px"),this._circleElement.style.height="".concat(a,"px")}}}]),t}(ke),He=function(e){function t(){return L(this,t),p(this,t,arguments)}return h(t,e),A(t,[{key:"onAdd",value:function(e){return c(d(t.prototype),"onAdd",this).call(this,e)}}]),t}(l.AttributionControl),Ge=function(e){function t(){return L(this,t),p(this,t,arguments)}return h(t,e),A(t,[{key:"onAdd",value:function(e){return c(d(t.prototype),"onAdd",this).call(this,e)}}]),t}(l.ScaleControl),Ke=function(e){function t(){return L(this,t),p(this,t,arguments)}return h(t,e),A(t,[{key:"onAdd",value:function(e){return c(d(t.prototype),"onAdd",this).call(this,e)}}]),t}(l.FullscreenControl),Ve=Object.defineProperty,We=Object.defineProperties,Ze=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,qe=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Xe=function(e,t,r){return t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},$e=function(e,t){for(var r in t||(t={}))qe.call(t,r)&&Xe(e,r,t[r]);if(Ye){var o,n=i(Ye(t));try{for(n.s();!(o=n.n()).done;){r=o.value;Je.call(t,r)&&Xe(e,r,t[r])}}catch(a){n.e(a)}finally{n.f()}}return e},Qe=function(e,t){return We(e,Ze(t))},et=function(e,t,r){if(!t.has(e))throw TypeError("Cannot "+r)},tt=function(e,t,r){return et(e,t,"read from private field"),r?r.call(e):t.get(e)},rt=function(e,t,r){if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ot=function(e,t,r,o){return et(e,t,"write to private field"),o?o.call(e,r):t.set(e,r),r},nt=function(e,t,r){return et(e,t,"access private method"),r},at=function(){function e(t,r){var o,n,a;L(this,e),rt(this,ye),rt(this,ge),rt(this,Le),rt(this,ce,void 0),Xe(this,"symbol"!==s(o="map")?o+"":o,n),rt(this,se,void 0),rt(this,pe,void 0),rt(this,fe,void 0),rt(this,he,void 0),rt(this,me,!1),rt(this,ve,void 0),void 0!==t.style&&ot(this,me,!0),ot(this,ce,Qe($e(Qe($e({zoomAdjust:-4,position:"top-right"},r),{forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1}),t),{containerStyle:$e({border:"1px solid #000",width:"400px",height:"300px"},null!=(a=t.containerStyle)?a:{})})),void 0!==t.lockZoom&&(tt(this,ce).minZoom=t.lockZoom,tt(this,ce).maxZoom=t.lockZoom)}return A(e,[{key:"setStyle",value:function(e,t){tt(this,me)||this.map.setStyle(e,t),nt(this,ge,be).call(this)}},{key:"addLayer",value:function(e,t){return tt(this,me)||this.map.addLayer(e,t),nt(this,ge,be).call(this),this.map}},{key:"moveLayer",value:function(e,t){return tt(this,me)||this.map.moveLayer(e,t),nt(this,ge,be).call(this),this.map}},{key:"removeLayer",value:function(e){return tt(this,me)||this.map.removeLayer(e),nt(this,ge,be).call(this),this}},{key:"setLayerZoomRange",value:function(e,t,r){return tt(this,me)||this.map.setLayerZoomRange(e,t,r),nt(this,ge,be).call(this),this}},{key:"setFilter",value:function(e,t,r){return tt(this,me)||this.map.setFilter(e,t,r),nt(this,ge,be).call(this),this}},{key:"setPaintProperty",value:function(e,t,r,o){return tt(this,me)||this.map.setPaintProperty(e,t,r,o),nt(this,ge,be).call(this),this}},{key:"setLayoutProperty",value:function(e,t,r,o){return tt(this,me)||this.map.setLayoutProperty(e,t,r,o),nt(this,ge,be).call(this),this}},{key:"setGlyphs",value:function(e,t){return tt(this,me)||this.map.setGlyphs(e,t),nt(this,ge,be).call(this),this}},{key:"onAdd",value:function(e){var t=this;ot(this,se,e),ot(this,pe,te("div","maplibregl-ctrl maplibregl-ctrl-group"));for(var r=0,o=Object.entries(tt(this,ce).containerStyle);r<o.length;r++){var n=a(o[r],2),i=n[0],l=n[1];tt(this,pe).style.setProperty(i,l)}return tt(this,ce).container=tt(this,pe),tt(this,ce).zoom=e.getZoom()+tt(this,ce).zoomAdjust,this.map=new dt(tt(this,ce)),this.map.once("style.load",(function(){t.map.resize()})),this.map.once("load",(function(){nt(t,ye,de).call(t,tt(t,ce).parentRect),ot(t,ve,nt(t,Le,we).call(t))})),tt(this,pe)}},{key:"onRemove",value:function(){var e;null==(e=tt(this,ve))||e.call(this),re(tt(this,pe))}}]),e}();ce=new WeakMap,se=new WeakMap,pe=new WeakMap,fe=new WeakMap,he=new WeakMap,me=new WeakMap,ve=new WeakMap,ye=new WeakSet,de=function(e){void 0===e||void 0===e.linePaint&&void 0===e.fillPaint||(ot(this,he,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:tt(this,he)}),void 0===e.lineLayout&&void 0===e.linePaint||this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:$e({},e.lineLayout),paint:$e({"line-color":"#FFF","line-width":1,"line-opacity":.85},e.linePaint)}),void 0!==e.fillPaint&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:$e({"fill-color":"#08F","fill-opacity":.135},e.fillPaint)}),nt(this,ge,be).call(this))},ge=new WeakSet,be=function(){if(void 0!==tt(this,he)){var e=window.devicePixelRatio,t=tt(this,se).getCanvas(),r=t.width/e,o=t.height/e,n=tt(this,se).unproject.bind(tt(this,se)),a=n([0,0]),i=n([r,0]),l=n([0,o]),u=n([r,o]);tt(this,he).geometry.coordinates=[[l.toArray(),u.toArray(),i.toArray(),a.toArray(),l.toArray()]],this.map.getSource("parentRect").setData(tt(this,he))}},Le=new WeakSet,we=function(){var e=this,t=tt(this,ce).pitchAdjust,r=function(){i("parent")},o=function(){i("minimap")},n=function(){tt(e,se).on("move",r),e.map.on("move",o)},a=function(){tt(e,se).off("move",r),e.map.off("move",o)},i=function(r){var o;a();var i="parent"===r?tt(e,se):e.map,l="parent"===r?e.map:tt(e,se),u=i.getCenter(),c=i.getZoom()+(null!=(o=tt(e,ce).zoomAdjust)?o:-4)*("parent"===r?1:-1),s=i.getBearing(),p=i.getPitch();l.jumpTo({center:u,zoom:c,bearing:s,pitch:t?p:0}),nt(e,ge,be).call(e),n()};return n(),function(){a()}};var it=Object.defineProperty,lt=Object.defineProperties,ut=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,ft=function(e,t,r){return t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},ht=function(e,t){for(var r in t||(t={}))st.call(t,r)&&ft(e,r,t[r]);if(ct){var o,n=i(ct(t));try{for(n.s();!(o=n.n()).done;){r=o.value;pt.call(t,r)&&ft(e,r,t[r])}}catch(a){n.e(a)}finally{n.f()}}return e},mt=function(e,t,r){return ft(e,"symbol"!==s(t)?t+"":t,r),r},vt=function(e,t,r){return new Promise((function(o,n){var a=function(e){try{l(r.next(e))}catch(t){n(t)}},i=function(e){try{l(r.throw(e))}catch(t){n(t)}},l=function(e){return e.done?o(e.value):Promise.resolve(e.value).then(a,i)};l((r=r.apply(e,t)).next())}))},yt="COUNTRY",dt=function(e){function t(e){var r,o,a,i;L(this,t),e.apiKey&&(K.apiKey=e.apiKey);var u,c,h=ue(e.style),m=location.hash;K.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!"),r=p(this,t,[(u=ht({},e),c={style:h,maplibreLogo:!1,transformRequest:ne(e.transformRequest)},lt(u,ut(c)))]),mt(f(r),"isTerrainEnabled",!1),mt(f(r),"terrainExaggeration",1),mt(f(r),"primaryLanguage"),mt(f(r),"terrainGrowing",!1),mt(f(r),"terrainFlattening",!1),mt(f(r),"minimap"),mt(f(r),"forceLanguageUpdate"),mt(f(r),"languageAlwaysBeenStyle"),mt(f(r),"isReady",!1),r.primaryLanguage=null!=(o=e.language)?o:K.primaryLanguage,r.forceLanguageUpdate=r.primaryLanguage!==U.STYLE&&r.primaryLanguage!==U.STYLE_LOCK,r.languageAlwaysBeenStyle=r.primaryLanguage===U.STYLE,r.terrainExaggeration=null!=(a=e.terrainExaggeration)?a:r.terrainExaggeration,r.once("styledata",(function(){return vt(f(r),null,n().mark((function t(){var r,o=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.geolocate){t.next=2;break}return t.abrupt("return");case 2:if(!e.center){t.next=4;break}return t.abrupt("return");case 4:if(!e.hash||!m){t.next=6;break}return t.abrupt("return");case 6:if(t.prev=6,e.geolocate!==yt){t.next=11;break}return t.next=10,this.fitToIpBounds();case 10:return t.abrupt("return");case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),console.warn(t.t0.message);case 16:return t.prev=16,t.next=19,this.centerOnIpPoint(e.zoom);case 19:r=this.getCameraHash(),t.next=25;break;case 22:t.prev=22,t.t1=t.catch(16),console.warn(t.t1.message);case 25:return t.next=27,navigator.permissions.query({name:"geolocation"});case 27:"granted"===t.sent.state&&navigator.geolocation.getCurrentPosition((function(t){r===o.getCameraHash()&&(o.terrain?o.easeTo({center:[t.coords.longitude,t.coords.latitude],zoom:e.zoom||12,duration:2e3}):o.once("terrain",(function(){o.easeTo({center:[t.coords.longitude,t.coords.latitude],zoom:e.zoom||12,duration:2e3})})))}),null,{maximumAge:864e5,timeout:5e3,enableHighAccuracy:!1});case 29:case"end":return t.stop()}}),t,this,[[6,13],[16,22]])})))})),r.on("styledata",(function(){r.setPrimaryLanguage(r.primaryLanguage)})),r.on("styledata",(function(){null===r.getTerrain()&&r.isTerrainEnabled&&r.enableTerrain(r.terrainExaggeration)})),r.once("load",(function(){return vt(f(r),null,n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"unavailable"===l.getRTLTextPluginStatus()&&l.setRTLTextPlugin(F.rtlPluginURL,(function(e){e&&console.error(e)}),!0);case 1:case"end":return e.stop()}}),e)})))})),r.once("load",(function(){return vt(f(r),null,n().mark((function t(){var r,o,a,i,l,u,c,s,p,f,h,m=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={logo:null},t.prev=1,o=Object.keys(this.style.sourceCaches).map((function(e){return m.getSource(e)})).filter((function(e){return e&&"url"in e&&"string"==typeof e.url&&(null==e?void 0:e.url.includes("tiles.json"))})),(a=new URL(o[0].url)).searchParams.has("key")||a.searchParams.append("key",K.apiKey),t.next=7,fetch(a.href);case 7:return i=t.sent,t.next=10,i.json();case 10:r=t.sent,t.next=15;break;case 13:t.prev=13,t.t0=t.catch(1);case 15:!0!==e.forceNoAttributionControl&&("logo"in r&&r.logo?(l=r.logo,this.addControl(new Y({logoURL:l}),e.logoPosition),!1===e.attributionControl&&this.addControl(new He({customAttribution:e.customAttribution}))):e.maptilerLogo&&this.addControl(new Y,e.logoPosition)),e.scaleControl&&(u=!0===e.scaleControl||void 0===e.scaleControl?"bottom-right":e.scaleControl,c=new Ge({unit:K.unit}),this.addControl(c,u),K.on("unit",(function(e){c.setUnit(e)}))),!1!==e.navigationControl&&(s=!0===e.navigationControl||void 0===e.navigationControl?"top-right":e.navigationControl,this.addControl(new Re,s)),!1!==e.geolocateControl&&(p=!0===e.geolocateControl||void 0===e.geolocateControl?"top-right":e.geolocateControl,this.addControl(new Be({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),p)),e.terrainControl&&(f=!0===e.terrainControl||void 0===e.terrainControl?"top-right":e.terrainControl,this.addControl(new _e,f)),e.fullscreenControl&&(h=!0===e.fullscreenControl||void 0===e.fullscreenControl?"top-right":e.fullscreenControl,this.addControl(new Ke({}),h)),this.isReady=!0,this.fire("ready",{target:this});case 23:case"end":return t.stop()}}),t,this,[[1,13]])})))}));var v,y=!1,d=!1;r.once("ready",(function(){y=!0,d&&r.fire("loadWithTerrain",v)})),r.once("style.load",(function(){var t,o=e.minimap;if("object"===s(o)){var n=e.zoom,a=e.center,i=e.style,l=e.language,u=e.apiKey,c=e.maptilerLogo,p=e.antialias,f=e.refreshExpiredTiles,h=e.maxBounds,m=e.scrollZoom,v=e.minZoom,y=e.maxZoom,d=e.boxZoom,g=e.locale,b=e.fadeDuration,L=e.crossSourceCollisions,w=e.clickTolerance,A=e.bounds,S=e.fitBoundsOptions,_=e.pixelRatio,T=e.validateStyle;r.minimap=new at(o,{zoom:n,center:a,style:i,language:l,apiKey:u,container:"null",maptilerLogo:c,antialias:p,refreshExpiredTiles:f,maxBounds:h,scrollZoom:m,minZoom:v,maxZoom:y,boxZoom:d,locale:g,fadeDuration:b,crossSourceCollisions:L,clickTolerance:w,bounds:A,fitBoundsOptions:S,pixelRatio:_,validateStyle:T}),r.addControl(r.minimap,null!=(t=o.position)?t:"bottom-left")}else!0===o?(r.minimap=new at({},e),r.addControl(r.minimap,"bottom-left")):void 0!==o&&!1!==o&&(r.minimap=new at({},e),r.addControl(r.minimap,o))}));return r.on("terrain",(function e(t){t.terrain&&(d=!0,v={type:"loadWithTerrain",target:f(r),terrain:t.terrain},r.off("terrain",e),y&&r.fire("loadWithTerrain",v))})),e.terrain&&r.enableTerrain(null!=(i=e.terrainExaggeration)?i:r.terrainExaggeration),r}return h(t,e),A(t,[{key:"onLoadAsync",value:function(){return vt(this,null,n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(t.loaded())return e(t);t.once("load",(function(){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"onReadyAsync",value:function(){return vt(this,null,n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(t.isReady)return e(t);t.once("ready",(function(){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"onLoadWithTerrainAsync",value:function(){return vt(this,null,n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(t.isReady&&t.terrain)return e(t);t.once("loadWithTerrain",(function(){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"setStyle",value:function(e,r){var o,n=this;return null==(o=this.minimap)||o.setStyle(e),this.forceLanguageUpdate=!0,this.once("idle",(function(){n.forceLanguageUpdate=!1})),c(d(t.prototype),"setStyle",this).call(this,ue(e),r)}},{key:"addLayer",value:function(e,r){var o;return null==(o=this.minimap)||o.addLayer(e,r),c(d(t.prototype),"addLayer",this).call(this,e,r)}},{key:"moveLayer",value:function(e,r){var o;return null==(o=this.minimap)||o.moveLayer(e,r),c(d(t.prototype),"moveLayer",this).call(this,e,r)}},{key:"removeLayer",value:function(e){var r;return null==(r=this.minimap)||r.removeLayer(e),c(d(t.prototype),"removeLayer",this).call(this,e)}},{key:"setLayerZoomRange",value:function(e,r,o){var n;return null==(n=this.minimap)||n.setLayerZoomRange(e,r,o),c(d(t.prototype),"setLayerZoomRange",this).call(this,e,r,o)}},{key:"setFilter",value:function(e,r,o){var n;return null==(n=this.minimap)||n.setFilter(e,r,o),c(d(t.prototype),"setFilter",this).call(this,e,r,o)}},{key:"setPaintProperty",value:function(e,r,o,n){var a;return null==(a=this.minimap)||a.setPaintProperty(e,r,o,n),c(d(t.prototype),"setPaintProperty",this).call(this,e,r,o,n)}},{key:"setLayoutProperty",value:function(e,r,o,n){var a;return null==(a=this.minimap)||a.setLayoutProperty(e,r,o,n),c(d(t.prototype),"setLayoutProperty",this).call(this,e,r,o,n)}},{key:"setGlyphs",value:function(e,r){var o;return null==(o=this.minimap)||o.setGlyphs(e,r),c(d(t.prototype),"setGlyphs",this).call(this,e,r)}},{key:"getStyleLanguage",value:function(){return this.style.stylesheet.metadata?"object"!==s(this.style.stylesheet.metadata)?null:"maptiler:language"in this.style.stylesheet.metadata&&"string"==typeof this.style.stylesheet.metadata["maptiler:language"]?this.style.stylesheet.metadata["maptiler:language"]:null:null}},{key:"setLanguage",value:function(e){var t,r,o=this;null==(r=null==(t=this.minimap)?void 0:t.map)||r.setLanguage(e),this.onStyleReady((function(){o.setPrimaryLanguage(e)}))}},{key:"setPrimaryLanguage",value:function(e){var t=this.getStyleLanguage();if(e!==U.STYLE||t!==U.AUTO&&t!==U.VISITOR){if(e!==U.STYLE&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle)return;if(this.primaryLanguage===e&&!this.forceLanguageUpdate)return}if(D(e))if(this.primaryLanguage!==U.STYLE_LOCK){this.primaryLanguage=e;var r=e;if(e===U.STYLE){if(!t)return void console.warn("The style has no default languages.");if(!D(t))return void console.warn("The language defined in the style is not valid.");r=t}var o=U.LOCAL,n="{".concat(o,"}");n=r==U.VISITOR?["case",["all",["has",o=j()],["has",U.LOCAL]],["case",["==",["get",o],["get",U.LOCAL]],["get",U.LOCAL],["format",["get",o],{"font-scale":.8},"\n",["get",U.LOCAL],{"font-scale":1.1}]],["get",U.LOCAL]]:r==U.VISITOR_ENGLISH?["case",["all",["has",o=U.ENGLISH],["has",U.LOCAL]],["case",["==",["get",o],["get",U.LOCAL]],["get",U.LOCAL],["format",["get",o],{"font-scale":.8},"\n",["get",U.LOCAL],{"font-scale":1.1}]],["get",U.LOCAL]]:r===U.AUTO?["case",["has",o=j()],["get",o],["get",U.LOCAL]]:r===U.LOCAL?"{".concat(o=U.LOCAL,"}"):["case",["has",o=r],["get",o],["get",U.LOCAL]];var a,l=i(this.getStyle().layers);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=u.id,s=u.layout;if(s&&"text-field"in s){var p=this.getLayoutProperty(c,"text-field");"string"==typeof p&&(p.toLowerCase().includes("ref")||p.toLowerCase().includes("housenumber"))||this.setLayoutProperty(c,"text-field",n)}}}catch(f){l.e(f)}finally{l.f()}}else console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");else console.warn('The language "'.concat(e,'" is not supported.'))}},{key:"getPrimaryLanguage",value:function(){return this.primaryLanguage}},{key:"getTerrainExaggeration",value:function(){return this.terrainExaggeration}},{key:"hasTerrain",value:function(){return this.isTerrainEnabled}},{key:"growTerrain",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(this.terrain){var o=performance.now(),n=this.terrain.exaggeration,a=e-n;this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame((function i(){if(t.terrain&&!t.terrainFlattening){var l=(performance.now()-o)/r;if(l<.99){var u=1-Math.pow(1-l,4),c=n+u*a;t.terrain.exaggeration=c,requestAnimationFrame(i)}else t.terrainGrowing=!1,t.terrainFlattening=!1,t.terrain.exaggeration=e;t.triggerRepaint()}}))}}},{key:"enableTerrain",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.terrainExaggeration;if(t<0)console.warn("Terrain exaggeration cannot be negative.");else{var r=function r(o){return vt(e,null,n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.terrain){e.next=2;break}return e.abrupt("return");case 2:if("data"===o.type&&"source"===o.dataType&&"source"in o){e.next=4;break}return e.abrupt("return");case 4:if("maptiler-terrain"===o.sourceId){e.next=6;break}return e.abrupt("return");case 6:if("raster-dem"===o.source.type){e.next=9;break}return e.abrupt("return");case 9:if(o.isSourceLoaded){e.next=11;break}return e.abrupt("return");case 11:this.off("data",r),this.growTerrain(t);case 13:case"end":return e.stop()}}),e,this)})))},o=function(){e.isTerrainEnabled=!0,e.terrainExaggeration=t,e.on("data",r),e.addSource(F.terrainSourceId,{type:"raster-dem",url:F.terrainSourceURL}),e.setTerrain({source:F.terrainSourceId,exaggeration:0})};if(this.getTerrain())return this.isTerrainEnabled=!0,void this.growTerrain(t);this.loaded()||this.isTerrainEnabled?o():this.once("load",(function(){e.getTerrain()&&e.getSource(F.terrainSourceId)||o()}))}}},{key:"disableTerrain",value:function(){var e=this;if(this.terrain){this.isTerrainEnabled=!1;var t=performance.now(),r=this.terrain.exaggeration;this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame((function o(){if(e.terrain&&!e.terrainGrowing){var n=(performance.now()-t)/1e3;if(n<.99){var a=Math.pow(1-n,4),i=r*a;e.terrain.exaggeration=i,requestAnimationFrame(o)}else e.terrain.exaggeration=0,e.terrainGrowing=!1,e.terrainFlattening=!1,e.setTerrain(),e.getSource(F.terrainSourceId)&&e.removeSource(F.terrainSourceId);e.triggerRepaint()}}))}}},{key:"setTerrainExaggeration",value:function(e){!(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.terrain?(this.terrainExaggeration=e,this.terrain.exaggeration=e,this.triggerRepaint()):this.enableTerrain(e)}},{key:"onStyleReady",value:function(e){this.isStyleLoaded()?e():this.once("styledata",(function(){e()}))}},{key:"fitToIpBounds",value:function(){return vt(this,null,n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.info();case 2:t=e.sent,this.fitBounds(t.country_bounds,{duration:0,padding:100});case 4:case"end":return e.stop()}}),e,this)})))}},{key:"centerOnIpPoint",value:function(e){return vt(this,null,n().mark((function t(){var r,o,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.info();case 2:a=t.sent,this.jumpTo({center:[null!=(r=null==a?void 0:a.longitude)?r:0,null!=(o=null==a?void 0:a.latitude)?o:0],zoom:e||11});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getCameraHash",value:function(){var e=new Float32Array(5),t=this.getCenter();return e[0]=t.lng,e[1]=t.lat,e[2]=this.getZoom(),e[3]=this.getPitch(),e[4]=this.getBearing(),u.fromUint8Array(new Uint8Array(e.buffer))}},{key:"getSdkConfig",value:function(){return K}},{key:"getMaptilerSessionId",value:function(){return G}},{key:"setTransformRequest",value:function(e){return c(d(t.prototype),"setTransformRequest",this).call(this,ne(e)),this}},{key:"loadImageAsync",value:function(e){return vt(this,null,n().mark((function t(){var r=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,o){r.loadImage(e,(function(e,r){e?o(e):t(r)}))})));case 1:case"end":return t.stop()}}),t)})))}}]),t}(l.Map),gt=(l.Marker,l.Popup,l.Style,l.CanvasSource,l.GeoJSONSource,l.ImageSource,l.RasterTileSource,l.RasterDEMTileSource,l.VectorTileSource,l.VideoSource,l.TerrainControl,Object.defineProperty),bt=Object.getOwnPropertySymbols,Lt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,At=function(e,t,r){return t in e?gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},St=function(e,t){for(var r in t||(t={}))Lt.call(t,r)&&At(e,r,t[r]);if(bt){var o,n=i(bt(t));try{for(n.s();!(o=n.n()).done;){r=o.value;wt.call(t,r)&&At(e,r,t[r])}}catch(a){n.e(a)}finally{n.f()}}return e};function _t(e){if("undefined"!=typeof DOMParser){var t=(new DOMParser).parseFromString(e,"application/xml");if(t.querySelector("parsererror"))throw new Error("The provided string is not valid XML");return t}throw new Error("No XML parser found")}function Tt(e,t){if(!e.hasChildNodes())return!1;for(var r=0,o=Array.from(e.childNodes);r<o.length;r++){var n=o[r].nodeName;if("string"==typeof n&&n.trim().toLowerCase()===t.toLowerCase())return!0}return!1}function It(e){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(e);throw new Error("No XML serializer found")}function Et(e){if("string"==typeof e&&(e=_t(e)),!Tt(e,"gpx"))throw new Error("The XML document is not valid GPX");for(var t,r=jt(e,"trk"),o=jt(e,"rte"),n=jt(e,"wpt"),a={type:"FeatureCollection",features:[]},i=0,l=Array.from(r);i<l.length;i++){var u=Nt(l[i]);u&&a.features.push(u)}for(var c=0,s=Array.from(o);c<s.length;c++){var p=Ut(s[c]);p&&a.features.push(p)}for(var f=0,h=Array.from(n);f<h.length;f++){var m=h[f];a.features.push((void 0,{type:"Feature",properties:St(St({},Dt(t=m)),Vt(t,["sym"])),geometry:{type:"Point",coordinates:Yt(t).coordinates}}))}return a}function Rt(e,t){var r;if("string"==typeof e&&(e=_t(e)),!Tt(e,"kml"))throw new Error("The XML document is not valid KML");for(var o={type:"FeatureCollection",features:[]},n={},a={},i={},l=jt(e,"Placemark"),u=jt(e,"Style"),c=jt(e,"StyleMap"),s=0,p=Array.from(u);s<p.length;s++){var f=p[s],h=Mt(void 0!==t?t(f):It(f)).toString(16);n["#"+Ft(f,"id")]=h,a[h]=f}for(var m=0,v=Array.from(c);m<v.length;m++){var y=v[m];n["#"+Ft(y,"id")]=Mt(void 0!==t?t(y):It(y)).toString(16);for(var d=jt(y,"Pair"),g={},b=0,L=Array.from(d);b<L.length;b++){var w=L[b];g[null!=(r=Kt(Ht(w,"key")))?r:""]=Kt(Ht(w,"styleUrl"))}i["#"+Ft(y,"id")]=g}for(var A=0,S=Array.from(l);A<S.length;A++){var _=S[A];o.features=o.features.concat(xt(_,n,a,i))}return o}function kt(e){if(null===e)return["#000000",1];var t="",r=1;return"#"===e.substring(0,1)&&(e=e.substring(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(r=parseInt(e.substring(0,2),16)/255,t="#"+e.substring(6,8)+e.substring(4,6)+e.substring(2,4)),[null!=t?t:"#000000",null!=r?r:1]}function Ct(e){var t,r=jt(e,"coord"),o=[],n=[];0===r.length&&(r=jt(e,"gx:coord"));for(var a=0,i=Array.from(r);a<i.length;a++){var l=i[a];o.push(Gt((null!=(t=Kt(l))?t:"").split(" ")))}for(var u=jt(e,"when"),c=0,s=Array.from(u);c<s.length;c++){var p=s[c];n.push(Kt(p))}return{coords:o,times:n}}function Ot(e){var t,r,o,n,a,i,l,u,c=["Polygon","LineString","Point","Track","gx:Track"],s=[],p=[];if(null!==Ht(e,"MultiGeometry"))return Ot(Ht(e,"MultiGeometry"));if(null!==Ht(e,"MultiTrack"))return Ot(Ht(e,"MultiTrack"));if(null!==Ht(e,"gx:MultiTrack"))return Ot(Ht(e,"gx:MultiTrack"));for(i=0;i<c.length;i++)if(a=jt(e,c[i]))for(l=0;l<a.length;l++)if(n=a[l],"Point"===c[i])s.push({type:"Point",coordinates:Wt(null!=(t=Kt(Ht(n,"coordinates")))?t:"")});else if("LineString"===c[i])s.push({type:"LineString",coordinates:Zt(null!=(r=Kt(Ht(n,"coordinates")))?r:"")});else if("Polygon"===c[i]){var f=jt(n,"LinearRing"),h=[];for(u=0;u<f.length;u++)h.push(Zt(null!=(o=Kt(Ht(f[u],"coordinates")))?o:""));s.push({type:"Polygon",coordinates:h})}else if("Track"===c[i]||"gx:Track"===c[i]){var m=Ct(n);s.push({type:"LineString",coordinates:m.coords}),m.times.length&&p.push(m.times)}return{geoms:s,coordTimes:p}}function xt(e,t,r,o){var n,a,i,l,u,c,s,p,f,h,m,v=Ot(e),y={},d=Kt(Ht(e,"name")),g=Kt(Ht(e,"address")),b=Kt(Ht(e,"description")),L=Ht(e,"TimeSpan"),w=Ht(e,"TimeStamp"),A=Ht(e,"ExtendedData"),S=Ht(e,"visibility"),_=Kt(Ht(e,"styleUrl")),T=Ht(e,"LineStyle"),I=Ht(e,"PolyStyle");if(!v.geoms.length)return[];if(d&&(y.name=d),g&&(y.address=g),_){"#"!==_[0]&&(_="#"+_),y.styleUrl=_,t[_]&&(y.styleHash=t[_]),o[_]&&(y.styleMapHash=o[_],y.styleHash=t[null!=(n=o[_].normal)?n:""]);var E=r[null!=(a=y.styleHash)?a:""];if(E){T||(T=Ht(E,"LineStyle")),I||(I=Ht(E,"PolyStyle"));var R=Ht(E,"IconStyle");if(R){var k=Ht(R,"Icon");if(k){var C=Kt(Ht(k,"href"));C&&(y.icon=C)}}}}if(b&&(y.description=b),L){var O=Kt(Ht(L,"begin")),x=Kt(Ht(L,"end"));O&&x&&(y.timespan={begin:O,end:x})}if(null!==w&&(y.timestamp=null!=(i=Kt(Ht(w,"when")))?i:(new Date).toISOString()),null!==T){var P=kt(Kt(Ht(T,"color"))),N=P[0],U=P[1],z=parseFloat(null!=(l=Kt(Ht(T,"width")))?l:"");N&&(y.stroke=N),isNaN(U)||(y["stroke-opacity"]=U),isNaN(z)||(y["stroke-width"]=z)}if(I){var D=kt(Kt(Ht(I,"color"))),M=D[0],j=D[1],F=Kt(Ht(I,"fill")),B=Kt(Ht(I,"outline"));M&&(y.fill=M),isNaN(j)||(y["fill-opacity"]=j),F&&(y["fill-opacity"]="1"===F?y["fill-opacity"]||1:0),B&&(y["stroke-opacity"]="1"===B?y["stroke-opacity"]||1:0)}if(A){var H=jt(A,"Data"),G=jt(A,"SimpleData");for(m=0;m<H.length;m++)y[null!=(u=H[m].getAttribute("name"))?u:""]=null!=(c=Kt(Ht(H[m],"value")))?c:"";for(m=0;m<G.length;m++)y[null!=(s=G[m].getAttribute("name"))?s:""]=null!=(p=Kt(G[m]))?p:""}null!==S&&(y.visibility=null!=(f=Kt(S))?f:""),0!==v.coordTimes.length&&(y.coordTimes=1===v.coordTimes.length?v.coordTimes[0]:v.coordTimes);var K={type:"Feature",geometry:1===v.geoms.length?v.geoms[0]:{type:"GeometryCollection",geometries:v.geoms},properties:y};return Ft(e,"id")&&(K.id=null!=(h=Ft(e,"id"))?h:void 0),[K]}function Pt(e,t){var r=jt(e,t),o=[],n=[],a=[],i=r.length;if(!(i<2)){for(var l=0;l<i;l++){var u=Yt(r[l]);o.push(u.coordinates),u.time&&n.push(u.time),(u.heartRate||a.length)&&(0===a.length&&(a=new Array(l).fill(null)),a.push(u.heartRate))}return{line:o,times:n,heartRates:a}}}function Nt(e){for(var t,r=jt(e,"trkseg"),o=[],n=[],a=[],i=0;i<r.length;i++)if(void 0!==(t=Pt(r[i],"trkpt"))&&(t.line&&o.push(t.line),t.times&&t.times.length&&n.push(t.times),a.length||t.heartRates&&t.heartRates.length)){if(!a.length)for(var l=0;l<i;l++)a.push(new Array(o[l].length).fill(null));t.heartRates&&t.heartRates.length?a.push(t.heartRates):a.push(new Array(t.line.length).fill(null))}if(0!==o.length){var u=St(St({},Dt(e)),zt(Ht(e,"extensions")));return 0!==n.length&&(u.coordTimes=1===o.length?n[0]:n),0!==a.length&&(u.heartRates=1===o.length?a[0]:a),1===o.length?{type:"Feature",properties:u,geometry:{type:"LineString",coordinates:o[0]}}:{type:"Feature",properties:u,geometry:{type:"MultiLineString",coordinates:o}}}}function Ut(e){var t=Pt(e,"rtept");if(void 0!==t)return{type:"Feature",properties:St(St({},Dt(e)),zt(Ht(e,"extensions"))),geometry:{type:"LineString",coordinates:t.line}}}function zt(e){var t,r,o={};if(e){var n=Ht(e,"line");if(n){var a=Kt(Ht(n,"color")),i=parseFloat(null!=(t=Kt(Ht(n,"opacity")))?t:"0"),l=parseFloat(null!=(r=Kt(Ht(n,"width")))?r:"0");a&&(o.stroke=a),isNaN(i)||(o["stroke-opacity"]=i),isNaN(l)||(o["stroke-width"]=96*l/25.4)}}return o}function Dt(e){var t=Vt(e,["name","cmt","desc","type","time","keywords"]),r=jt(e,"link");if(0!==r.length){t.links=[];for(var o=0,n=Array.from(r);o<n.length;o++){var a=n[o],i=St({href:Ft(a,"href")},Vt(a,["text","type"]));t.links.push(i)}}return t}function Mt(e){var t=0;if(!e||!e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}function jt(e,t){return e.getElementsByTagName(t)}function Ft(e,t){return e.getAttribute(t)}function Bt(e,t){var r;return parseFloat(null!=(r=Ft(e,t))?r:"0")}function Ht(e,t){var r=jt(e,t);return r.length?r[0]:null}function Gt(e){return e.map(parseFloat).map((function(e){return isNaN(e)?null:e}))}function Kt(e){var t;return e&&((t=e).normalize&&t.normalize()),e&&e.textContent}function Vt(e,t){var r,o,n,a={};for(n=0;n<t.length;n++)(o=Ht(e,t[n]))&&(a[t[n]]=null!=(r=Kt(o))?r:"");return a}function Wt(e){return Gt(e.replace(/\s*/g,"").split(","))}function Zt(e){var t,r=[],o=i(e.replace(/^\s*|\s*$/g,"").split(/\s+/));try{for(o.s();!(t=o.n()).done;){var n=t.value;r.push(Wt(n))}}catch(a){o.e(a)}finally{o.f()}return r}function Yt(e){var t,r,o,n=[Bt(e,"lon"),Bt(e,"lat")],a=Ht(e,"ele"),i=Ht(e,"gpxtpx:hr")||Ht(e,"hr"),l=Ht(e,"time");return a&&(o=parseFloat(null!=(t=Kt(a))?t:"0"),isNaN(o)||n.push(o)),{coordinates:n,time:l?Kt(l):null,heartRate:null!==i?parseFloat(null!=(r=Kt(i))?r:"0"):null}}function qt(e){try{"string"==typeof e&&(e=_t(e))}catch(t){return null}try{return Et(e)}catch(t){}try{return Rt(e)}catch(t){}return null}var Jt=Object.defineProperty,Xt=function(e,t,r){return function(e,t,r){t in e?Jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r}(e,"symbol"!==s(t)?t+"":t,r),r};function $t(e){var t=e.toString(16);return 1==t.length?"0"+t:t}var Qt=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return L(this,t),e=p(this,t),Xt(f(e),"min",0),Xt(f(e),"max",1),"min"in r&&(e.min=r.min),"max"in r&&(e.max=r.max),"stops"in r&&e.setStops(r.stops,{clone:!1}),e}return h(t,e),A(t,[{key:"setStops",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{clone:!0}).clone?this.clone():this;t.length=0;for(var r=1/0,o=-1/0,n=0;n<e.length;n+=1)r=Math.min(r,e[n].value),o=Math.max(o,e[n].value),t.push({value:e[n].value,color:e[n].color.slice()});return t.sort((function(e,t){return e.value<t.value?-1:1})),this.min=r,this.max=o,t}},{key:"scale",value:function(e,r){for(var o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0}).clone,n=this[0].value,a=this.at(-1).value-n,i=r-e,l=[],u=0;u<this.length;u+=1){var c=(this[u].value-n)/a*i+e;o?l.push({value:c,color:this[u].color.slice()}):this[u].value=c}return o?new t({stops:l}):this}},{key:"at",value:function(e){return e<0?this[this.length+e]:this[e]}},{key:"clone",value:function(){return new t({stops:this.getRawColorStops()})}},{key:"getRawColorStops",value:function(){for(var e=[],t=0;t<this.length;t+=1)e.push({value:this[t].value,color:this[t].color});return e}},{key:"reverse",value:function(){for(var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clone:!0}).clone?this.clone():this,t=0;t<~~(e.length/2);t+=1){var r=e[t].color;e[t].color=e.at(-(t+1)).color,e.at(-(t+1)).color=r}return e}},{key:"getBounds",value:function(){return{min:this.min,max:this.max}}},{key:"getColor",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{smooth:!0};if(e<=this[0].value)return this[0].color;if(e>=this.at(-1).value)return this.at(-1).color;for(var o,n=function(){if(e>t[a+1].value)return 0;var o=t[a].color;if(!r.smooth)return{v:o.slice()};var n=t[a].value,i=t[a+1].value,l=t[a+1].color,u=(i-e)/(i-n);return{v:o.map((function(e,t){return Math.round(e*u+l[t]*(1-u))}))}},a=0;a<this.length-1;a+=1)if(0!==(o=n())&&o)return o.v;return[0,0,0]}},{key:"getColorHex",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{smooth:!0,withAlpha:!1};return"#"+$t((t=this.getColor(e,r))[0])+$t(t[1])+$t(t[2])+(4===t.length?$t(t[3]):"")}},{key:"getColorRelative",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{smooth:!0},r=this.getBounds();return this.getColor(r.min+e*(r.max-r.min),t)}},{key:"getCanvasStrip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{horizontal:!0,size:512,smooth:!0},t=document.createElement("canvas");t.width=e.horizontal?e.size:1,t.height=e.horizontal?1:e.size;var r=t.getContext("2d");if(!r)throw new Error("Canvs context is missing");for(var o=r.getImageData(0,0,t.width,t.height),n=o.data,a=e.size,i=this[0].value,l=(this.at(-1).value-i)/a,u=0;u<a;u+=1){var c=this.getColor(i+u*l,{smooth:e.smooth});n[4*u]=c[0],n[4*u+1]=c[1],n[4*u+2]=c[2],n[4*u+3]=c.length>3?c[3]:255}return r.putImageData(o,0,0),t}},{key:"resample",value:function(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=this.getBounds(),a=this.scale(0,1),i=1/(o-1);if("ease-in-square"===e)r=Array.from({length:o},(function(e,t){var r=t*i,o=Math.pow(r,2);return{value:r,color:a.getColor(o)}}));else if("ease-out-square"===e)r=Array.from({length:o},(function(e,t){var r=t*i,o=1-Math.pow(1-r,2);return{value:r,color:a.getColor(o)}}));else if("ease-out-sqrt"===e)r=Array.from({length:o},(function(e,t){var r=t*i,o=Math.pow(r,.5);return{value:r,color:a.getColor(o)}}));else if("ease-in-sqrt"===e)r=Array.from({length:o},(function(e,t){var r=t*i,o=1-Math.pow(1-r,.5);return{value:r,color:a.getColor(o)}}));else if("ease-out-exp"===e)r=Array.from({length:o},(function(e,t){var r=t*i,o=1-Math.pow(2,-10*r);return{value:r,color:a.getColor(o)}}));else{if("ease-in-exp"!==e)throw new Error("Invalid ressampling method.");r=Array.from({length:o},(function(e,t){var r=t*i,o=Math.pow(2,10*r-10);return{value:r,color:a.getColor(o)}}))}return new t({stops:r}).scale(n.min,n.max)}},{key:"transparentStart",value:function(){var e=this.getRawColorStops();return e.unshift({value:e[0].value,color:e[0].color.slice()}),e[1].value+=.001,e.forEach((function(e){3===e.color.length&&e.color.push(255)})),e[0].color[3]=0,new t({stops:e})}},{key:"hasTransparentStart",value:function(){return 4===this[0].color.length&&0===this[0].color[3]}}],[{key:"fromArrayDefinition",value:function(e){return new t({stops:e.map((function(e){return{value:e[0],color:e[1]}}))})}}]),t}(m(Array)),er={NULL:new Qt({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),GRAY:new Qt({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),JET:new Qt({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),HSV:new Qt({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),HOT:new Qt({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),SPRING:new Qt({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),SUMMER:new Qt({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),AUTOMN:new Qt({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),WINTER:new Qt({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),BONE:new Qt({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),COPPER:new Qt({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),GREYS:new Qt({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),YIGNBU:new Qt({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),GREENS:new Qt({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),YIORRD:new Qt({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),BLUERED:new Qt({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),RDBU:new Qt({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),PICNIC:new Qt({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),RAINBOW:new Qt({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),PORTLAND:new Qt({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),BLACKBODY:new Qt({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),EARTH:new Qt({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),ELECTRIC:new Qt({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),VIRIDIS:new Qt({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),INFERNO:new Qt({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),MAGMA:new Qt({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),PLASMA:new Qt({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),WARM:new Qt({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),COOL:new Qt({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),RAINBOW_SOFT:new Qt({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),BATHYMETRY:new Qt({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),CDOM:new Qt({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),CHLOROPHYLL:new Qt({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),DENSITY:new Qt({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),FREESURFACE_BLUE:new Qt({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),FREESURFACE_RED:new Qt({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),OXYGEN:new Qt({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),PAR:new Qt({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),PHASE:new Qt({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),SALINITY:new Qt({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),TEMPERATURE:new Qt({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),TURBIDITY:new Qt({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),VELOCITY_BLUE:new Qt({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),VELOCITY_GREEN:new Qt({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),CUBEHELIX:new Qt({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),CIVIDIS:new Qt({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),TURBO:new Qt({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),ROCKET:new Qt({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),MAKO:new Qt({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]})},tr=[["#1D5B79","#468B97","#EF6262","#F3AA60"],["#614BC3","#33BBC5","#85E6C5","#C8FFE0"],["#461959","#7A316F","#CD6688","#AED8CC"],["#0079FF","#00DFA2","#F6FA70","#FF0060"],["#39B5E0","#A31ACB","#FF78F0","#F5EA5A"],["#37E2D5","#590696","#C70A80","#FBCB0A"],["#FFD36E","#FFF56D","#99FFCD","#9FB4FF"],["#00EAD3","#FFF5B7","#FF449F","#005F99"],["#10A19D","#540375","#FF7000","#FFBF00"]];function rr(){return tr[~~(Math.random()*tr.length)][~~(4*Math.random())]}function or(){return"maptiler_source_".concat(ae())}function nr(){return"maptiler_layer_".concat(ae())}function ar(e,t){if(t<=e[0].zoom)return e[0].value;if(t>=e[e.length-1].zoom)return e[e.length-1].value;for(var r=0;r<e.length-1;r+=1)if(t>=e[r].zoom&&t<e[r+1].zoom){var o=e[r+1].zoom-e[r].zoom,n=(t-e[r].zoom)/o;return n*e[r+1].value+(1-n)*e[r].value}return 0}function ir(e){return["interpolate",["linear"],["zoom"]].concat(o(e.map((function(e){return[e.zoom,e.value]})).flat()))}function lr(e){return["interpolate",["linear"],["zoom"]].concat(o(e.map((function(e){return[e.zoom,e.value]})).flat()))}function ur(e,t){if("number"==typeof t&&"number"==typeof e)return 2*t+e;if("number"==typeof t&&Array.isArray(e))return["interpolate",["linear"],["zoom"]].concat(o(e.map((function(e){return[e.zoom,2*t+e.value]})).flat()));if("number"==typeof e&&Array.isArray(t))return["interpolate",["linear"],["zoom"]].concat(o(t.map((function(t){return[t.zoom,2*t.value+e]})).flat()));if(Array.isArray(e)&&Array.isArray(t)){var r=Array.from(new Set([].concat(o(e.map((function(e){return e.zoom}))),o(t.map((function(e){return e.zoom})))))).sort((function(e,t){return e<t?-1:1}));return["interpolate",["linear"],["zoom"]].concat(o(r.map((function(r){return[r,2*ar(t,r)+ar(e,r)]})).flat()))}return 0}function cr(e){var t=e.trimStart(),r="".concat(t).concat(" ".repeat(e.length-t.length)),o=Array.from(r);if(!o.every((function(e){return" "===e||"_"===e})))throw new Error("A dash pattern must be composed only of whitespace and underscore characters.");if(!(o.some((function(e){return"_"===e}))&&o.some((function(e){return" "===e}))))throw new Error("A dash pattern must contain at least one underscore and one whitespace character");for(var n=[1],a=1;a<o.length;a+=1){o[a-1]===o[a]?n[n.length-1]+=1:n.push(1)}return n}function sr(e,t){return["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.value,e.color]})).flat()))}function pr(e,t){return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.value,.025*e.pointRadius]})).flat())),2,["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.value,.05*e.pointRadius]})).flat())),4,["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.value,.1*e.pointRadius]})).flat())),8,["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.value,.25*e.pointRadius]})).flat())),16,["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.value,e.pointRadius]})).flat()))]:["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.value,e.pointRadius]})).flat()))}function fr(e,t){return e.every((function(t){return t.color[3]===e[0].color[3]}))?e[0].color[3]?e[0].color[3]/255:1:["interpolate",["linear"],["get",t]].concat(o(e.getRawColorStops().map((function(e){var t=e.value,r=e.color;return[t,4===r.length?r[3]/255:1]})).flat()))}function hr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return["interpolate",["linear"],["heatmap-density"]].concat(o(Array.from({length:t+1},(function(r,o){var n=o/t;return[n,e.getColorHex(n)]})).flat()))}var mr=Object.defineProperty,vr=Object.defineProperties,yr=Object.getOwnPropertyDescriptors,dr=Object.getOwnPropertySymbols,gr=Object.prototype.hasOwnProperty,br=Object.prototype.propertyIsEnumerable,Lr=function(e,t,r){return t in e?mr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},wr=function(e,t){for(var r in t||(t={}))gr.call(t,r)&&Lr(e,r,t[r]);if(dr){var o,n=i(dr(t));try{for(n.s();!(o=n.n()).done;){r=o.value;br.call(t,r)&&Lr(e,r,t[r])}}catch(a){n.e(a)}finally{n.f()}}return e};function Ar(e,t){var r,o,n,a,i,l,u,c,s,p,f,h,m,v,y,d,g,b,L,w;if(t.layerId&&e.getLayer(t.layerId))throw new Error("A layer already exists with the layer id: ".concat(t.layerId));var A=null!=(r=t.sourceId)?r:or(),S=null!=(o=t.layerId)?o:nr(),_={polylineLayerId:S,polylineOutlineLayerId:"",polylineSourceId:A};t.data&&!e.getSource(A)&&e.addSource(A,{type:"geojson",data:t.data});var T=null!=(n=t.lineWidth)?n:3,I=null!=(a=t.lineColor)?a:rr(),E=null!=(i=t.lineOpacity)?i:1,R=null!=(l=t.lineBlur)?l:0,k=null!=(u=t.lineGapWidth)?u:0,C=null!=(c=t.lineDashArray)?c:null,O=null!=(s=t.outlineWidth)?s:1,x=null!=(p=t.outlineColor)?p:"#FFFFFF",P=null!=(f=t.outlineOpacity)?f:1,N=null!=(h=t.outlineBlur)?h:0;if("string"==typeof C&&(C=cr(C)),!0===t.outline){var U="".concat(S,"_outline");_.polylineOutlineLayerId=U,e.addLayer({id:U,type:"line",source:A,layout:{"line-join":null!=(m=t.lineJoin)?m:"round","line-cap":null!=(v=t.lineCap)?v:"round"},minzoom:null!=(y=t.minzoom)?y:0,maxzoom:null!=(d=t.maxzoom)?d:23,paint:{"line-opacity":"number"==typeof P?P:lr(P),"line-color":"string"==typeof x?x:ir(x),"line-width":ur(T,O),"line-blur":"number"==typeof N?N:lr(N)}},t.beforeId)}return e.addLayer({id:S,type:"line",source:A,layout:{"line-join":null!=(g=t.lineJoin)?g:"round","line-cap":null!=(b=t.lineCap)?b:"round"},minzoom:null!=(L=t.minzoom)?L:0,maxzoom:null!=(w=t.maxzoom)?w:23,paint:wr({"line-opacity":"number"==typeof E?E:lr(E),"line-color":"string"==typeof I?I:ir(I),"line-width":"number"==typeof T?T:lr(T),"line-blur":"number"==typeof R?R:lr(R),"line-gap-width":"number"==typeof k?k:lr(k)},C&&{"line-dasharray":C})},t.beforeId),_}var Sr={addPolyline:function(e,t){return r=this,o=arguments,a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n().mark((function o(){var a,i,l,u,c,s,p,f,h;return n().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t.sourceId||t.data){o.next=2;break}throw new Error("Creating a polyline layer requires an existing .sourceId or a valid .data property");case 2:if("string"!=typeof(u=t.data)){o.next=32;break}if(!ie(u)){o.next=8;break}u="https://api.maptiler.com/data/".concat(t.data,"/features.json?key=").concat(K.apiKey),o.next=30;break;case 8:if("gpx"!==(null==(a=u.split(".").pop())?void 0:a.toLowerCase().trim())){o.next=18;break}return o.next=11,fetch(u,r);case 11:return c=o.sent,o.next=14,c.text();case 14:s=o.sent,u=Et(s),o.next=30;break;case 18:if("kml"!==(null==(i=u.split(".").pop())?void 0:i.toLowerCase().trim())){o.next=28;break}return o.next=21,fetch(u,r);case 21:return p=o.sent,o.next=24,p.text();case 24:f=o.sent,u=Rt(f),o.next=30;break;case 28:(h=null!=(l=le(u))?l:qt(u))&&(u=h);case 30:if(u){o.next=32;break}throw new Error("Polyline data was provided as string but is incompatible with valid formats.");case 32:return o.abrupt("return",Ar(e,(n=wr({},t),vr(n,yr({data:u})))));case 33:case"end":return o.stop()}var n}),o)}))()},new Promise((function(e,t){var n=function(e){try{l(a.next(e))}catch(r){t(r)}},i=function(e){try{l(a.throw(e))}catch(r){t(r)}},l=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(n,i)};l((a=a.apply(r,o)).next())}));var r,o,a},addPolygon:function(e,t){var r,o,n,a,i,l,u,c,s,p,f;if(t.layerId&&e.getLayer(t.layerId))throw new Error("A layer already exists with the layer id: ".concat(t.layerId));var h=null!=(r=t.sourceId)?r:or(),m=null!=(o=t.layerId)?o:nr(),v={polygonLayerId:m,polygonOutlineLayerId:t.outline?"".concat(m,"_outline"):"",polygonSourceId:h};if(t.data&&!e.getSource(h)){var y=t.data;"string"==typeof y&&ie(y)&&(y="https://api.maptiler.com/data/".concat(y,"/features.json?key=").concat(K.apiKey)),e.addSource(h,{type:"geojson",data:y})}var d=null!=(n=t.outlineDashArray)?n:null,g=null!=(a=t.outlineWidth)?a:1,b=null!=(i=t.outlineColor)?i:"#FFFFFF",L=null!=(l=t.outlineOpacity)?l:1,w=null!=(u=t.outlineBlur)?u:0,A=null!=(c=t.fillColor)?c:rr(),S=null!=(s=t.fillOpacity)?s:1,_=null!=(p=t.outlinePosition)?p:"center",T=null!=(f=t.pattern)?f:null;"string"==typeof d&&(d=cr(d));var I=function(){var r,o,n,a,i,l,u,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(e.addLayer({id:m,type:"fill",source:h,minzoom:null!=(r=t.minzoom)?r:0,maxzoom:null!=(o=t.maxzoom)?o:23,paint:wr({"fill-color":"string"==typeof A?A:ir(A),"fill-opacity":"number"==typeof S?S:lr(S)},c&&{"fill-pattern":c})},t.beforeId),!0===t.outline)&&(u="inside"===_?"number"==typeof g?.5*g:lr(g.map((function(e){return{zoom:e.zoom,value:.5*e.value}}))):"outside"===_?"number"==typeof g?-.5*g:lr(g.map((function(e){return{zoom:e.zoom,value:-.5*e.value}}))):0,e.addLayer({id:v.polygonOutlineLayerId,type:"line",source:h,layout:{"line-join":null!=(n=t.outlineJoin)?n:"round","line-cap":null!=(a=t.outlineCap)?a:"butt"},minzoom:null!=(i=t.minzoom)?i:0,maxzoom:null!=(l=t.maxzoom)?l:23,paint:wr({"line-opacity":"number"==typeof L?L:lr(L),"line-color":"string"==typeof b?b:ir(b),"line-width":"number"==typeof g?g:lr(g),"line-blur":"number"==typeof w?w:lr(w),"line-offset":u},d&&{"line-dasharray":d})},t.beforeId))};return T?e.hasImage(T)?I(T):e.loadImage(T,(function(t,r){return t?(console.error("Could not load the pattern image.",t.message),I()):r?(e.addImage(T,r),void I(T)):(console.error("An image cannot be created from the pattern URL ".concat(T,".")),I())})):I(),v},addPoint:function(e,t){var r,o,n,a,i,l,u,c,s,p,f,h,m,v,y,d;if(t.layerId&&e.getLayer(t.layerId))throw new Error("A layer already exists with the layer id: ".concat(t.layerId));var g,b=null!=(r=t.minPointRadius)?r:10,L=null!=(o=t.maxPointRadius)?o:50,w=null!=(n=t.cluster)&&n,A=20,S=Array.isArray(t.pointColor)?t.pointColor:er.TURBO.scale(10,t.cluster?1e4:1e3).resample("ease-out-square"),_=S.getBounds(),T=null!=(a=t.sourceId)?a:or(),I=null!=(i=t.layerId)?i:nr(),E=null!=(l=t.showLabel)?l:w,R=null==(u=t.alignOnViewport)||u,k=null!=(c=t.outline)&&c,C=null!=(s=t.outlineOpacity)?s:1,O=null!=(p=t.outlineWidth)?p:1,x=null!=(f=t.outlineColor)?f:"#FFFFFF",P=null==(h=t.zoomCompensation)||h,N=null!=(m=t.minzoom)?m:0,U=null!=(v=t.maxzoom)?v:23;g="number"==typeof t.pointOpacity?t.pointOpacity:Array.isArray(t.pointOpacity)?lr(t.pointOpacity):t.cluster?fr(S,"point_count"):t.property?fr(S,t.property):lr([{zoom:N,value:0},{zoom:N+.25,value:1},{zoom:U-.25,value:1},{zoom:U,value:0}]);var z={pointLayerId:I,clusterLayerId:"",labelLayerId:"",pointSourceId:T};if(t.data&&!e.getSource(T)){var D=t.data;"string"==typeof D&&ie(D)&&(D="https://api.maptiler.com/data/".concat(D,"/features.json?key=").concat(K.apiKey)),e.addSource(T,{type:"geojson",data:D,cluster:w})}if(w){z.clusterLayerId="".concat(I,"_cluster");var M=Array.from({length:A},(function(e,t){var r=_.min+t*(_.max-_.min)/19;return{value:r,pointRadius:b+(L-b)*Math.pow(t/19,.5),color:S.getColorHex(r)}}));e.addLayer({id:z.clusterLayerId,type:"circle",source:T,filter:["has","point_count"],paint:wr({"circle-color":"string"==typeof t.pointColor?t.pointColor:sr(M,"point_count"),"circle-radius":"number"==typeof t.pointRadius?t.pointRadius:Array.isArray(t.pointRadius)?lr(t.pointRadius):pr(M,"point_count",!1),"circle-pitch-alignment":R?"viewport":"map","circle-pitch-scale":"map","circle-opacity":g},k&&{"circle-stroke-opacity":"number"==typeof C?C:lr(C),"circle-stroke-width":"number"==typeof O?O:lr(O),"circle-stroke-color":"string"==typeof x?x:ir(x)}),minzoom:N,maxzoom:U},t.beforeId),e.addLayer({id:z.pointLayerId,type:"circle",source:T,filter:["!",["has","point_count"]],paint:wr({"circle-pitch-alignment":R?"viewport":"map","circle-pitch-scale":"map","circle-color":"string"==typeof t.pointColor?t.pointColor:S.getColorHex(S.getBounds().min),"circle-radius":"number"==typeof t.pointRadius?t.pointRadius:Array.isArray(t.pointRadius)?lr(t.pointRadius):.75*M[0].pointRadius,"circle-opacity":g},k&&{"circle-stroke-opacity":"number"==typeof C?C:lr(C),"circle-stroke-width":"number"==typeof O?O:lr(O),"circle-stroke-color":"string"==typeof x?x:ir(x)}),minzoom:N,maxzoom:U},t.beforeId)}else{var j="string"==typeof t.pointColor?t.pointColor:Array.isArray(t.pointColor)?t.pointColor.getColorHex(t.pointColor.getBounds().min):rr(),F="number"==typeof t.pointRadius?P?lr([{zoom:0,value:.025*t.pointRadius},{zoom:2,value:.05*t.pointRadius},{zoom:4,value:.1*t.pointRadius},{zoom:8,value:.25*t.pointRadius},{zoom:16,value:1*t.pointRadius}]):t.pointRadius:Array.isArray(t.pointRadius)?lr(t.pointRadius):P?lr([{zoom:0,value:.05*b},{zoom:2,value:.1*b},{zoom:4,value:.2*b},{zoom:8,value:.5*b},{zoom:16,value:1*b}]):b;if(t.property&&Array.isArray(t.pointColor)){var B=Array.from({length:A},(function(e,r){var o=_.min+r*(_.max-_.min)/19;return{value:o,pointRadius:"number"==typeof t.pointRadius?t.pointRadius:b+(L-b)*Math.pow(r/19,.5),color:"string"==typeof t.pointColor?t.pointColor:S.getColorHex(o)}}));j=sr(B,t.property),F=pr(B,t.property,P)}e.addLayer({id:z.pointLayerId,type:"circle",source:T,layout:{"circle-sort-key":t.property?["/",1,["get",t.property]]:0},paint:wr({"circle-pitch-alignment":R?"viewport":"map","circle-pitch-scale":"map","circle-color":j,"circle-opacity":g,"circle-radius":F},k&&{"circle-stroke-opacity":"number"==typeof C?C:lr(C),"circle-stroke-width":"number"==typeof O?O:lr(O),"circle-stroke-color":"string"==typeof x?x:ir(x)}),minzoom:N,maxzoom:U},t.beforeId)}if(!1!==E&&(t.cluster||t.property)){z.labelLayerId="".concat(I,"_label");var H=null!=(y=t.labelColor)?y:"#fff",G=null!=(d=t.labelSize)?d:12;e.addLayer({id:z.labelLayerId,type:"symbol",source:T,filter:["has",t.cluster?"point_count":t.property],layout:{"text-field":t.cluster?"{point_count_abbreviated}":"{".concat(t.property,"}"),"text-font":["Noto Sans Regular"],"text-size":G,"text-pitch-alignment":R?"viewport":"map","symbol-sort-key":["/",1,["get",t.cluster?"point_count":t.property]]},paint:{"text-color":H,"text-opacity":g},minzoom:N,maxzoom:U},t.beforeId)}return z},addHeatmap:function(e,t){var r,n,a,i,l,u,c,s,p,f;if(t.layerId&&e.getLayer(t.layerId))throw new Error("A layer already exists with the layer id: ".concat(t.layerId));var h=null!=(r=t.sourceId)?r:or(),m=null!=(n=t.layerId)?n:nr(),v=null!=(a=t.minzoom)?a:0,y=null!=(i=t.maxzoom)?i:23,d=null==(l=t.zoomCompensation)||l,g=null!=(u=t.opacity)?u:[{zoom:v,value:0},{zoom:v+.25,value:1},{zoom:y-.25,value:1},{zoom:y,value:0}],b=Array.isArray(t.colorRamp)?t.colorRamp:er.TURBO.transparentStart(),L=b.getBounds();0===L.min&&1===L.max||(b=b.scale(0,1)),b.hasTransparentStart()||(b=b.transparentStart());var w=null!=(c=t.intensity)?c:[{zoom:0,value:.01},{zoom:4,value:.2},{zoom:16,value:1}],A=null!=(s=t.property)?s:null,S=null!=(p=t.weight)?p:1,_=1;A?"number"==typeof S?(_=S,"number"==typeof t.weight&&console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`")):Array.isArray(S)?_=function(e,t){return["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.propertyValue,e.value]})).flat()))}(S,A):console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`"):"number"==typeof S?_=S:Array.isArray(S)&&console.warn("The options `.propertyValueWeights` can only be used when `.property` is provided.");var T=[{zoom:0,value:1.25},{zoom:2,value:2.5},{zoom:4,value:5},{zoom:8,value:12.5},{zoom:16,value:50}],I=null!=(f=t.radius)?f:d?T:10,E=1;"number"==typeof I?E=I:Array.isArray(I)&&"zoom"in I[0]?E=lr(I):A&&Array.isArray(I)&&"propertyValue"in I[0]?E=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.propertyValue,e.value]})).flat())):["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.propertyValue,.025*e.value]})).flat())),2,["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.propertyValue,.05*e.value]})).flat())),4,["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.propertyValue,.1*e.value]})).flat())),8,["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.propertyValue,.25*e.value]})).flat())),16,["interpolate",["linear"],["get",t]].concat(o(e.map((function(e){return[e.propertyValue,e.value]})).flat()))]}(I,A,d):!A&&Array.isArray(I)&&"propertyValue"in I[0]?(E=lr(T),console.warn("The option `.radius` can only be property-driven if the option `.property` is provided.")):E=lr(T);var R={heatmapLayerId:m,heatmapSourceId:h};if(t.data&&!e.getSource(h)){var k=t.data;"string"==typeof k&&ie(k)&&(k="https://api.maptiler.com/data/".concat(k,"/features.json?key=").concat(K.apiKey)),e.addSource(h,{type:"geojson",data:k})}return e.addLayer({id:m,type:"heatmap",source:h,minzoom:v,maxzoom:y,paint:{"heatmap-weight":_,"heatmap-intensity":"number"==typeof w?w:lr(w),"heatmap-color":hr(b),"heatmap-radius":E,"heatmap-opacity":"number"==typeof g?g:lr(g)}}),R}},_r=l,Tr=(_r.setRTLTextPlugin,_r.getRTLTextPluginStatus,_r.LngLat);_r.LngLatBounds,_r.MercatorCoordinate,_r.Evented,_r.AJAXError,_r.prewarm,_r.clearPrewarmedResources,_r.version,_r.workerCount,_r.maxParallelImageRequests,_r.workerUrl,_r.addProtocol,_r.removeProtocol;l.Map,l.Marker,l.Popup,l.Style,l.CanvasSource,l.GeoJSONSource,l.ImageSource,l.RasterTileSource,l.RasterDEMTileSource,l.VectorTileSource,l.VideoSource,l.NavigationControl,l.GeolocateControl,l.AttributionControl,l.LogoControl,l.ScaleControl,l.FullscreenControl,l.TerrainControl;e("l",null);!function(){try{g.MaptilerLayer=g.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},map:null,initialize:function(e){g.setOptions(this,e),this._throttledUpdate=g.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(e){this._container||this._initContainer();var t=document.createElement("a");t.href="https://www.maptiler.com",t.style="position:absolute; left:10px; bottom:2px; z-index:999;";var r=document.createElement("img");r.src="https://api.maptiler.com/resources/logo.svg",r.alt="MapTiler logo",r.width="100",r.height="30",t.appendChild(r),e.getContainer().appendChild(t);var o=this.getPaneName();e.getPane(o).appendChild(this._container),this._initMaptilerSDK(),this._offset=this._map.containerPointToLayerPoint([0,0]),e.options.zoomAnimation&&g.DomEvent.on(e._proxy,g.DomUtil.TRANSITION_END,this._transitionEnd,this),e.attributionControl.addAttribution('<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>')},onRemove:function(e){this._map._proxy&&this._map.options.zoomAnimation&&g.DomEvent.off(this._map._proxy,g.DomUtil.TRANSITION_END,this._transitionEnd,this);var t=this.getPaneName();e.getPane(t).removeChild(this._container),this._maptilerMap.remove(),this._maptilerMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaptilerSDKMap:function(){return this._maptilerMap},getCanvas:function(){return this._maptilerMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+2*this.options.padding)},getBounds:function(){var e=this.getSize().multiplyBy(.5),t=this._map.latLngToContainerPoint(this._map.getCenter());return g.latLngBounds(this._map.containerPointToLatLng(t.subtract(e)),this._map.containerPointToLatLng(t.add(e)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},setStyle:function(e){this._maptilerMap.setStyle(e)},setLanguage:function(e){this._maptilerMap.setLanguage(e)},_roundPoint:function(e){return{x:Math.round(e.x),y:Math.round(e.y)}},_initContainer:function(){var e=this._container=g.DomUtil.create("div","leaflet-gl-layer"),t=this.getSize(),r=this._map.getSize().multiplyBy(this.options.padding);e.style.width=t.x+"px",e.style.height=t.y+"px";var o=this._map.containerPointToLayerPoint([0,0]).subtract(r);g.DomUtil.setPosition(e,this._roundPoint(o))},_initMaptilerSDK:function(){var e=this,r=this._map.getCenter(),o=this.options.style,n=this.options.apiKey;if(("string"==typeof this.options.style||this.options.style instanceof String)&&this.options.style.startsWith("https://api.maptiler.com/maps/"))try{var a=new URL(this.options.style),i=a.searchParams.get("key");i&&(n=i,a.searchParams.delete("key"),o=a.href)}catch(a){console.error(a)}var l=t(t({},this.options),{},{style:o,apiKey:n,container:this._container,center:[r.lng,r.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this.options.geolocate&&(delete l.center,delete l.zoom),this._maptilerMap=new dt(l),this._maptilerMap.once("load",(function(){e.fire("ready")})),this._maptilerMap.transform.freezeElevation=!0,this.options.geolocate&&this._maptilerMap.on("load",(function(){e._map.setView(e._maptilerMap.getCenter(),e._maptilerMap.getZoom()+1)})),this._maptilerMap.transform.latRange=null,this._maptilerMap.transform.maxValidLatitude=1/0,this._transformGL(),this._maptilerMap._actualCanvas=this._maptilerMap._canvas;var u=this._maptilerMap._actualCanvas;g.DomUtil.addClass(u,"leaflet-image-layer"),g.DomUtil.addClass(u,"leaflet-zoom-animated"),this.options.interactive&&g.DomUtil.addClass(u,"leaflet-interactive"),this.options.className&&g.DomUtil.addClass(u,this.options.className),Object.keys(Sr).forEach((function(t){e[t]=function(r){return Sr[t].apply(null,[e._maptilerMap,r])}}))},_update:function(){if(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming){var e=this.getSize(),t=this._map.getSize().multiplyBy(this.options.padding),r=this._map.containerPointToLayerPoint([0,0]).subtract(t);g.DomUtil.setPosition(this._container,this._roundPoint(r)),this._transformGL(),this._maptilerMap.transform.width!==e.x||this._maptilerMap.transform.height!==e.y?(this._container.style.width=e.x+"px",this._container.style.height=e.y+"px",null!==this._maptilerMap._resize&&void 0!==this._maptilerMap._resize?this._maptilerMap._resize():this._maptilerMap.resize()):null!==this._maptilerMap._update&&void 0!==this._maptilerMap._update?this._maptilerMap._update():this._maptilerMap.update()}},_transformGL:function(){var e=this._map.getCenter(),t=this._maptilerMap.transform;t.center=Tr.convert([e.lng,e.lat]),t.zoom=this._map.getZoom()-1},_pinchZoom:function(){this._maptilerMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),r=this._map.getSize().multiplyBy(this.options.padding*t),o=this.getSize()._divideBy(2),n=this._map.project(e.center,e.zoom)._subtract(o)._add(this._map._getMapPanePos().add(r))._round(),a=this._map.project(this._map.getBounds().getNorthWest(),e.zoom)._subtract(n);g.DomUtil.setTransform(this._maptilerMap._actualCanvas,a.subtract(this._offset),t)},_zoomStart:function(){this._zooming=!0},_zoomEnd:function(){var e=this._map.getZoomScale(this._map.getZoom());g.DomUtil.setTransform(this._maptilerMap._actualCanvas,null,e),this._zooming=!1,this._update()},_transitionEnd:function(){g.Util.requestAnimFrame((function(){var e=this._map.getZoom(),t=this._map.getCenter(),r=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());g.DomUtil.setTransform(this._maptilerMap._actualCanvas,r,1),this._maptilerMap.once("moveend",g.Util.bind((function(){this._zoomEnd()}),this)),this._maptilerMap.jumpTo({center:t,zoom:e-1})}),this)},_resize:function(e){this._transitionEnd(e)}}),e("l",g.MaptilerLayer),g.maptilerLayer=function(e){return new g.MaptilerLayer(e)},g.maptilerLayer,g.MaptilerStyle={},Object.keys(N).forEach((function(e){g.MaptilerStyle[e]=N[e]})),g.MaptilerStyle,g.MaptilerStyle,g.maptilerStyle=g.MaptilerStyle,g.MaptilerLanguage={},Object.keys(U).forEach((function(e){g.MaptilerLanguage[e]=U[e]})),g.MaptilerLanguage,g.MaptilerLanguage,g.maptilerLanguage=g.MaptilerLanguage}catch(r){console.error(r)}}()}}}))}();
