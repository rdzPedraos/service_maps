!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(t,n,o){var r;return r=function(t,n){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(n,"string"),(n="symbol"==e(r)?r:String(r))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}System.register(["./vue-legacy.9c57e1e3.js","./leaflet-legacy.fabde539.js","./@maptiler-legacy.b4df3749.js","./leaflet-geosearch-legacy.75b0575a.js","./leaflet.locatecontrol-legacy.dbe08e02.js","./@geoman-io-legacy.c58e3ebd.js","./events-legacy.15a64e3a.js","./maplibre-gl-legacy.49e08608.js","./js-base64-legacy.81184b13.js","./uuid-legacy.ffafc7bf.js"],(function(e,t){"use strict";var o,r,a,i,l,s,c=document.createElement("style");return c.textContent="@keyframes pulse{0%{stroke-width:1}50%{stroke-width:3}to{stroke-width:1}}.pulse{animation:pulse 2s ease infinite}body{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;margin:0;min-height:100vh;background:#181818;padding:2rem}.admin__container{position:relative}.admin__edit{position:absolute;bottom:0;z-index:9999;background:#77c6ff94;padding:2rem;font-weight:700}\n",document.head.appendChild(c),{setters:[function(e){o=e.V},function(e){r=e.l},function(e){a=e.l},function(e){i=e.F,l=e.w},function(e){s=e.L},function(){},function(){},function(){},function(){},function(){}],execute:function(){var e="q5xt6kuI8cht07Kp2VRt",t="maptiler";function c(e,t){return r.map(e,t)}function u(){switch(t){case"maptiler":return new a({apiKey:e});case"openstreetmap":return r.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'});default:throw new Error("Invalid MAP_PROVIDER")}}function d(){var e=new i;return new l({provider:e,showMarker:!1,searchLabel:"Buscar dirección...",notFoundMessage:"Sorry, that address could not be found.",style:"bar"})}function f(e,t){t.forEach((function(t){e.addControl(t)}))}function p(e,t,n,o,r,a,i,l){var s,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),i?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=s):r&&(s=l?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(e,t){return s.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,s):[s]}return{exports:e,options:c}}var m={data:function(){return{map:null,marker:null,coords:null}},mounted:function(){this.initializeMap(),this.map.on("locationfound",this.moveMarker),this.map.on("click",this.moveMarker),this.map.on("geosearch/showlocation",this.moveMarker),this.map.locate({setView:!0})},methods:{initializeMap:function(){var e=c("user"),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0];return r.circleMarker(e,{color:"#fff",fillColor:"#007bff",fillOpacity:1,radius:10,weight:3,className:"pulse"})}();f(e,[t,u(),d(),new s({position:"topleft",flyTo:!0,drawMarker:!1,enableHighAccuracy:!0})]),this.map=e,this.marker=t},moveMarker:function(e){var t=function(e){var t=e.location?[e.location.y,e.location.x]:[e.latlng.lat,e.latlng.lng];return{lat:t[0],lng:t[1]}}(e);this.marker.setLatLng(t),this.coords=t}}},g=p({components:{MapUser:p(m,(function(){var e=this,t=e._self._c;return t("div",[t("span",{staticStyle:{color:"white"}},[e._v(e._s(e.coords))]),t("div",{staticStyle:{height:"800px"},attrs:{id:"user"}})])}),[],!1,null,null,null,null).exports,MapAdmin:p({components:{InfoBox:p({props:{polygon:{type:Object}},data:function(){return{fields:{name:"",description:"",color:"#3388ff"}}},watch:{polygon:{handler:function(e){this.fields=n({},e.metadata)},immediate:!0},"fields.color":{handler:function(e){this.$emit("onChangecolor",e)}}},methods:{onDelete:function(){this.$emit("delete",this.polygon)},onCancel:function(){this.$emit("cancel",this.polygon)},onSave:function(){var e=this.polygon,t=this.fields,o=n(n({},e),{},{metadata:n(n({},e.metadata),t)});this.$emit("save",o)}}},(function(){var e=this,t=e._self._c;return t("div",[t("label",[e._v(" Nombre: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.name,expression:"fields.name"}],attrs:{type:"text"},domProps:{value:e.fields.name},on:{input:function(t){t.target.composing||e.$set(e.fields,"name",t.target.value)}}})]),t("br"),t("br"),t("label",[e._v(" Descripción: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.description,expression:"fields.description"}],attrs:{type:"text"},domProps:{value:e.fields.description},on:{input:function(t){t.target.composing||e.$set(e.fields,"description",t.target.value)}}})]),t("br"),t("br"),t("label",[e._v(" Color: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.color,expression:"fields.color"}],attrs:{type:"color"},domProps:{value:e.fields.color},on:{input:function(t){t.target.composing||e.$set(e.fields,"color",t.target.value)}}})]),t("br"),t("br"),t("button",{on:{click:e.onSave}},[e._v("Guardar")]),t("button",{on:{click:e.onCancel}},[e._v("Cancelar")]),t("button",{on:{click:e.onDelete}},[e._v("Eliminar")])])}),[],!1,null,null,null,null).exports},data:function(){return{map:null,polygonSelected:null}},mounted:function(){var e=this;this.initializeMap(),this.loadPolygons(),this.map.on("pm:create",(function(t){var n=e.editPolygonInfo,o=t.layer;o.metadata={id:"area-"+Date.now(),shape:o.toGeoJSON(),color:"#3388ff"},o.on("click",(function(){return n(o)})),o.fire("click")}))},watch:{polygonSelected:function(e,t){null!=t&&t.metadata.id&&!localStorage.getItem(t.metadata.id)&&this.map.removeLayer(t)}},methods:{initializeMap:function(){var e=c("admin");f(e,[u(),new(r.Control.extend({onAdd:function(e){return e.pm.addControls({position:"topleft",drawText:!1,drawMarker:!1,drawRectangle:!0,drawCircle:!1,drawCircleMarker:!1,drawPolygon:!0,drawPolyline:!1,cutPolygon:!1,editMode:!0,dragMode:!0,removalMode:!0}),r.DomUtil.create("div")}})),d()]),e.locate({setView:!0}),this.map=e},deletePolygon:function(e){localStorage.removeItem(e.metadata.id),this.polygonSelected=null},editPolygonInfo:function(e){var t=this.getPolygon(e.metadata.id);t&&(e.metadata=t),this.polygonSelected=e},cancelPolygon:function(){this.polygonSelected=null},savePolygon:function(e){var t=e.metadata,n=JSON.stringify(e.metadata);localStorage.setItem(t.id,n),this.polygonSelected=null},setColor:function(e){this.polygonSelected.setStyle({color:e})},loadPolygons:function(){var e=this,t=this.editPolygonInfo;(0,this.getPolygons)().forEach((function(n){var o,a=(o=n.shape,r.geoJSON(o));a.setStyle({color:n.color}),a.metadata=n,a.on("click",(function(){return t(a)})),e.map.addLayer(a)}))},getPolygons:function(){for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);n.startsWith("area-")&&e.push(JSON.parse(localStorage.getItem(n)))}return e},getPolygon:function(e){return JSON.parse(localStorage.getItem(e))}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"admin__container"},[t("div",{staticStyle:{height:"800px"},attrs:{id:"admin"}}),e.polygonSelected?t("InfoBox",{staticClass:"admin__edit",attrs:{polygon:e.polygonSelected},on:{save:e.savePolygon,cancel:e.cancelPolygon,delete:e.deletePolygon,onChangecolor:e.setColor}}):e._e()],1)}),[],!1,null,null,null,null).exports}},(function(){var e=this,t=e._self._c;return t("div",[t("p",{staticStyle:{color:"white"}},[e._v("User")]),t("MapUser"),t("br"),t("br"),t("br"),t("p",{staticStyle:{color:"white"}},[e._v("Admin")]),t("MapAdmin")],1)}),[],!1,null,null,null,null).exports,y=p({__name:"App",setup:function(e){return{__sfc:!0,ShowMaps:g}}},(function(){var e=this._self._c;return e("div",{attrs:{id:"app"}},[e(this._self._setupProxy.ShowMaps)],1)}),[],!1,null,null,null,null).exports;new o({render:function(e){return e(y)}}).$mount("#app")}}}))}();
